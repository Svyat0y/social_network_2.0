{"version":3,"sources":["Redux/messages-reducer.js","Components/Aside/Aside.module.css","api/api.js","Redux/auth-reducer.js","Redux/app-reducer.js","Redux/redux-store.js","Components/LoginForm.jsx","Redux/selectors/auth-selectors.js","Components/Login.jsx","Components/Header/Header.jsx","Components/Header/HeaderContainer.jsx","Redux/selectors/side-bar-selectors.js","Components/Aside/AvatarsContainer/AvatarsContainer.jsx","Components/Aside/Aside.jsx","hoc/hocWithLazyLoad.js","Components/MainPage/MainPage.jsx","App.js","index.js","Components/Login.module.css","Redux/side-bar-reducer.js","Components/Header/Header.module.css","Components/Common/Preloader/Preloader.jsx","Components/Common/FormControls/FormControl.module.css","utils/validators.js","Components/Common/Preloader/Preloader.module.css","Components/Common/FormControls/FormControls.js","Redux/profile-reducer.js","Redux/users-reducer.js"],"names":["SEND_MY_MESSAGE_TEXT","SET_OPEN_DIALOG","initialState","usersWithDialogs","id","userImg","userName","dialogsMessages","message","openDialogWithUser","sendMessage","userId","body","dispatch","type","payload","sendMyMessage","reset","openUserslistAction","isOpen","setOpenDialogWithUser","messagesReducer","state","action","replace","module","exports","instance","axios","baseURL","withCredentials","headers","profileAPI","getProfile","get","getStatus","then","response","data","updateUserStatus","status","put","updateBioProfile","profile","savePhoto","photoFile","formData","FormData","append","usersAPI","getUsers","currentPage","pageSize","authAPI","me","login","email","password","rememberMe","captcha","post","logout","delete","subscribeAPI","follow","unfollow","securityAPI","getCaptcha","SET_USER_DATA","SET_CAPTCHA","SET_OWNER","isAuth","isOwner","captchaUrl","setUserData","setCaptchaUrl","setOwner","owner","getAuthUserData","a","resultCode","getCaptchaUrl","url","authReducer","INITIALIZED_SUCCESS","initialized","startInitialize","promiseMe","Promise","all","appReducer","reducers","combineReducers","sideBar","sideBarReducer","usersPage","usersReducer","auth","app","profilePage","profileReducer","messagesPage","form","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","Input","Element","LoginReduxForm","reduxForm","handleSubmit","onSubmit","className","style","login_form","Field","name","placeholder","component","validate","required","login_captcha","src","alt","getIsOwner","connect","loginAction","props","to","login_wrapper","login_box","values","openMenu","closeMenu","header","logo","menuBtn_visible","onClick","actionLogout_box","Header","getAvatars","avatarsData","AvatarItem","avatarName","avatarImg","avatar_wrapper","img_wrapper","user_name","avatarItem","map","avatar","avatars_wrapper","avatars_box","menuVisible","useEffect","document","querySelector","overflow","aside","asideOpen","nav","activeClassName","active_link","hocWithLazyLoad","Component","Suspense","fallback","Preloader","ProfileContainer","React","lazy","MessagesContainer","Music","Notifications","UsersContainer","Settings","MainPage","exact","path","render","ReactDOM","getElementById","SET_OPEN_MENU","SET_CLOSE_MENU","preloader_wrapper","fetching","value","maxLengthCreator","maxLength","length","input","meta","hasErrors","touched","error","form_control","errorMessage","SET_PROFILE","SET_POST","SET_STATUS","SET_UPDATE_BIO_SUCCESS","SET_UPLOADED_PHOTO","updatingBioSuccess","postData","likesCount","img","setUserStatus","setUpdateBioSuccess","successStatus","addPostMessage","setPostMessage","getUserProfile","getUserStatus","getState","userid","photo","photos","updateWasSuccessfully","refreshProfileInSettings","SET_USERS_DATA","SET_TOTAL_COUNT","SET_CURRENT_PAGE","SET_TOGGLE_FOLLOW","SET_IS_FETCHING","SET_FOLLOWING_IN_PROGRESS","users","totalCount","isFetching","followingInProgress","setCurrentPage","page","setToggleFollow","setIsFetching","setFollowingInProgress","isFollowing","requestUsers","items","followAccept","unfollowAccept","filter","u","followed"],"mappings":"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","file":"static/js/main.0199d934.chunk.js","sourcesContent":["import {reset} from \"redux-form\";\r\n\r\nconst SEND_MY_MESSAGE_TEXT = \"SEND_MY_MESSAGE_TEXT\"\r\nconst SET_OPEN_DIALOG = \"SET_OPEN_DIALOG\"\r\n\r\n\r\nconst initialState = {\r\n\tusersWithDialogs: [\r\n\t\t{\r\n\t\t\tid: 3450,\r\n\t\t\tuserImg: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT6b7WENFquctsWy8WgMSHmFJbVyJXf0lQ4R2XRAQcd2WgOK2IIfFlLUFcAcsdnpA8S_Wg&usqp=CAU',\r\n\t\t\tuserName: 'Sponge Bob'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 4560,\r\n\t\t\tuserImg: 'https://image1.thematicnews.com/uploads/images/00/00/41/2015/04/30/ad358ed4d0.jpg',\r\n\t\t\tuserName: 'Volk'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2340,\r\n\t\t\tuserImg: 'https://wonder-day.com/wp-content/uploads/2020/03/Wonder-Day-Ava-105.jpg',\r\n\t\t\tuserName: 'Dasha'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 3440,\r\n\t\t\tuserImg: 'https://www.meme-arsenal.com/memes/f0ffafb204862b25d0f1aa7fce251f3a.jpg',\r\n\t\t\tuserName: 'Niko'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 4000,\r\n\t\t\tuserImg: 'https://drasler.ru/wp-content/uploads/2019/05/%D0%94%D0%B5%D0%B2%D1%83%D1%88%D0%BA%D0%B0-%D0%B1%D1%80%D1%8E%D0%BD%D0%B5%D1%82%D0%BA%D0%B0-%D0%BD%D0%B0%D1%80%D0%B8%D1%81%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%B0%D1%8F-%D0%BA%D0%B0%D1%80%D1%82%D0%B8%D0%BD%D0%BA%D0%B8-%D0%B8-%D1%80%D0%B8%D1%81%D1%83%D0%BD%D0%BA%D0%B8023.jpg',\r\n\t\t\tuserName: 'Julia'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 5567,\r\n\t\t\tuserImg: 'https://i2.wp.com/andrey-eltsov.ru/wp-content/uploads/2017/09/DopNaAvu1.jpg',\r\n\t\t\tuserName: 'Vlad'\r\n\t\t}\r\n\t],\r\n\tdialogsMessages: [{id: 0, message: 'hi'}, {id: 1, message: 'how are u?'}, {id: 2, message: 'you here?'}],\r\n\topenDialogWithUser: false\r\n}\r\n\r\nconst messagesReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase SEND_MY_MESSAGE_TEXT:\r\n\t\t\tif (action.payload && action.payload.replace(/\\s/g, \"\")) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state, dialogsMessages: [...state.dialogsMessages, {\r\n\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\tmessage: action.payload\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn state\r\n\r\n\t\tcase SET_OPEN_DIALOG:\r\n\t\t\treturn {...state, openDialogWithUser: action.payload}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//action creators\r\nexport const sendMyMessage = (body) => ({type: SEND_MY_MESSAGE_TEXT, payload: body})\r\nexport const setOpenDialogWithUser = (isOpen) => ({type: SET_OPEN_DIALOG, payload: isOpen})\r\n\r\n\r\n// thunk creators\r\n\r\n// send message in dialogs\r\nexport const sendMessage = (userId, body) => (dispatch) => {\r\n\tdispatch(sendMyMessage(body))\r\n\tdispatch(reset(\"addDialogMessageForm\"))\r\n}\r\n\r\nexport const openUserslistAction = (isOpen) => (dispatch) => {\r\n\tdispatch(setOpenDialogWithUser(isOpen))\r\n}\r\n\r\nexport default messagesReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"aside\":\"Aside_aside__11b96\",\"asideOpen\":\"Aside_asideOpen__2HEwF\",\"nav\":\"Aside_nav__LAQWh\",\"active_link\":\"Aside_active_link__6zfJc\",\"avatars_wrapper\":\"Aside_avatars_wrapper__2968D\",\"avatars_box\":\"Aside_avatars_box__Nq9mM\",\"avatar_wrapper\":\"Aside_avatar_wrapper__vA0o8\",\"img_wrapper\":\"Aside_img_wrapper___ILMY\",\"user_name\":\"Aside_user_name__32glW\"};","import * as axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n\tbaseURL: `https://social-network.samuraijs.com/api/1.0/`,\r\n\twithCredentials: true,\r\n\theaders: {\r\n\t\t'API-KEY': 'a1cfc85a-7e70-4120-8bed-62fbd526678c'\r\n\t\t// 'API-KEY': 'bb8e013c-9223-4dee-8a5a-b96156c04ec6'\r\n\t}\r\n})\r\n\r\nexport const profileAPI = {\r\n\tgetProfile(userId) {\r\n\t\treturn instance.get(`profile/${userId}`)\r\n\t},\r\n\tgetStatus(userId) {\r\n\t\treturn instance.get(`profile/status/${userId}`).then(response => response.data)\r\n\t},\r\n\tupdateUserStatus(status) {\r\n\t\treturn instance.put(`profile/status`, {status}).then(response => response.data)\r\n\t},\r\n\tupdateBioProfile(profile) {\r\n\t\treturn instance.put(`profile`, profile).then(response => response.data)\r\n\t},\r\n\tsavePhoto(photoFile) {\r\n\t\tconst formData = new FormData()\r\n\t\tformData.append(\"image\", photoFile)\r\n\t\treturn instance.put(`profile/photo`, formData, {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'multipart/form-data'\r\n\t\t\t}\r\n\t\t}).then(response => response.data)\r\n\t}\r\n\r\n}\r\n\r\nexport const usersAPI = {\r\n\tgetUsers(currentPage, pageSize) {\r\n\t\treturn instance.get(`users?page=${currentPage}&count=${pageSize}`).then(response => response.data)\r\n\t}\r\n}\r\n\r\nexport const authAPI = {\r\n\tme() {\r\n\t\treturn instance.get(`auth/me`).then(response => response.data)\r\n\t},\r\n\tlogin(email, password, rememberMe = false, captcha = null) {\r\n\t\treturn instance.post(`auth/login`, {email, password, rememberMe, captcha}).then(response => response.data)\r\n\t},\r\n\tlogout() {\r\n\t\treturn instance.delete(`auth/login`).then(response => response.data)\r\n\t}\r\n}\r\n\r\nexport const subscribeAPI = {\r\n\tfollow(userId) {\r\n\t\treturn instance.post(`follow/${userId}`).then(response => response.data)\r\n\t},\r\n\tunfollow(userId) {\r\n\t\treturn instance.delete(`follow/${userId}`).then(response => response.data)\r\n\t}\r\n}\r\n\r\nexport const securityAPI = {\r\n\tgetCaptcha() {\r\n\t\treturn instance.get(`security/get-captcha-url`).then(response => response.data)\r\n\t}\r\n}","import {authAPI, securityAPI} from \"../api/api\";\r\n\r\nconst SET_USER_DATA = \"SET_USER_DATA\"\r\nconst SET_CAPTCHA = \"SET_CAPTCHA\"\r\nconst SET_OWNER = \"SET_OWNER\"\r\n\r\nlet initialState = {\r\n\tid: null,\r\n\temail: null,\r\n\tlogin: null,\r\n\tisAuth: false,\r\n\tisOwner: false,\r\n\tcaptchaUrl: null\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase SET_USER_DATA:\r\n\t\t\treturn {...state, ...action.payload}\r\n\r\n\t\tcase SET_CAPTCHA:\r\n\t\t\treturn {...state, captchaUrl: action.payload}\r\n\r\n\t\tcase SET_OWNER:\r\n\t\t\treturn {...state, isOwner: action.payload}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//action creators\r\nexport const setUserData = (id, email, login, isAuth) => ({type: SET_USER_DATA, payload: {id, email, login, isAuth}})\r\nexport const setCaptchaUrl = (captchaUrl) => ({type: SET_CAPTCHA, payload: captchaUrl})\r\nexport const setOwner = (owner) => ({type: SET_OWNER, payload: owner})\r\n\r\n\r\n// thunk creators\r\n\r\n// receive authorized user data\r\nexport const getAuthUserData = () => async (dispatch) => {\r\n\tlet data = await authAPI.me()\r\n\tif (data.resultCode === 0) {\r\n\t\tlet {id, email, login} = data.data\r\n\t\tdispatch(setUserData(id, email, login, true))\r\n\t\tdispatch(setOwner(true))\r\n\t}\r\n}\r\n\r\n// login\r\nexport const loginAction = (email, password, rememberMe, captcha) => async (dispatch) => {\r\n\tconst data = await authAPI.login(email, password, rememberMe, captcha)\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(getAuthUserData())\r\n\t} else {\r\n\t\tif (data.resultCode === 10) {\r\n\t\t\tdispatch(getCaptchaUrl())\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// logout\r\nexport const logout = () => async (dispatch) => {\r\n\tconst data = await authAPI.logout()\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(setUserData(null, null, null, false))\r\n\t\tdispatch(setCaptchaUrl(null))\r\n\t\tdispatch(setOwner(false))\r\n\t}\r\n}\r\n\r\n// receive captcha\r\nexport const getCaptchaUrl = () => async (dispatch) => {\r\n\tdebugger\r\n\tconst data = await securityAPI.getCaptcha()\r\n\tdispatch(setCaptchaUrl(data.url))\r\n}\r\n\r\n\r\nexport default authReducer;","import {getAuthUserData} from \"./auth-reducer\";\r\n\r\nconst INITIALIZED_SUCCESS = \"INITIALIZED_SUCCESS\"\r\n\r\nconst initialState = {\r\n\tinitialized: false\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase INITIALIZED_SUCCESS:\r\n\t\t\treturn {...state, initialized: true}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//action creators\r\nexport const initializeSuccess = () => ({type: INITIALIZED_SUCCESS})\r\n\r\n\r\n//thunk creators\r\n\r\n//initialization application\r\nexport const startInitialize = () => (dispatch) => {\r\n\tconst promiseMe = dispatch(getAuthUserData())\r\n\tPromise.all([promiseMe]).then(() => {\r\n\t\tdispatch(initializeSuccess())\r\n\t})\r\n}\r\n\r\nexport default appReducer;","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport {reducer as formReducer} from \"redux-form\"\r\nimport sideBarReducer from \"./side-bar-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport appReducer from \"./app-reducer\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport messagesReducer from \"./messages-reducer\";\r\n\r\nconst reducers = combineReducers({\r\n\tsideBar: sideBarReducer,\r\n\tusersPage: usersReducer,\r\n\tauth: authReducer,\r\n\tapp: appReducer,\r\n\tprofilePage: profileReducer,\r\n\tmessagesPage: messagesReducer,\r\n\tform: formReducer\r\n})\r\n\r\n// this is for the redux tool in the browser\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)))\r\n\r\nwindow.store = store;\r\n\r\nexport default store;","import React from \"react\";\r\nimport style from \"./Login.module.css\";\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {required} from \"../utils/validators\";\r\nimport {Element} from \"./Common/FormControls/FormControls\";\r\n\r\nconst Input = Element(\"input\")\r\n\r\nconst LoginForm = ({handleSubmit, captchaUrl}) => {\r\n\treturn (\r\n\t\t<form onSubmit={handleSubmit} className={style.login_form} action=\"\">\r\n\t\t\t<h5>Login</h5>\r\n\t\t\t<span>\r\n\t\t\t\t<Field name=\"email\" placeholder=\"email\" component={Input} validate={[required]}/>\r\n\t\t\t</span>\r\n\t\t\t<span>\r\n\t\t\t\t<Field name=\"password\" type=\"password\" placeholder=\"password\" component={Input} validate={[required]}/>\r\n\t\t\t</span>\r\n\t\t\t<label>\r\n\t\t\t\t<Field name=\"rememberMe\" component={Input} type=\"checkbox\"/>\r\n\t\t\t\t<span>Remember me</span>\r\n\t\t\t</label>\r\n\t\t\t{captchaUrl && <span className={style.login_captcha}>\r\n\t\t\t\t<Field name=\"captcha\" placeholder=\"captcha\" component={Input}/>\r\n\t\t\t\t<img src={captchaUrl} alt=\"captcha\"/>\r\n\t\t\t</span>}\r\n\t\t\t<div>\r\n\t\t\t\t<button>Login</button>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({form: \"login\"})(LoginForm)\r\n\r\nexport default LoginReduxForm;","export const getIsAuth = (state) => {\r\n\treturn state.auth.isAuth\r\n}\r\n\r\nexport const getCaptchaUrl = (state) => {\r\n\treturn state.auth.captchaUrl\r\n}\r\n\r\nexport const getIsOwner = (state) => {\r\n\treturn state.auth.isOwner\r\n}","import React, {useEffect} from 'react';\r\nimport style from './Login.module.css'\r\nimport {connect} from \"react-redux\";\r\nimport {loginAction} from \"../Redux/auth-reducer\";\r\nimport LoginReduxForm from \"./LoginForm\";\r\nimport {startInitialize} from \"../Redux/app-reducer\";\r\nimport {getCaptchaUrl, getIsAuth, getIsOwner} from \"../Redux/selectors/auth-selectors\";\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nconst Login = (props) => {\r\n\r\n\tconst {loginAction, captchaUrl, isOwner} = props\r\n\r\n\tconst onSubmit = (values) => {\r\n\t\tloginAction(values.email, values.password, values.rememberMe, values.captcha)\r\n\t}\r\n\r\n\tif (isOwner) return <Redirect to={\"/\"}/>\r\n\r\n\treturn (\r\n\t\t<div className={style.login_wrapper}>\r\n\t\t\t<div className={style.login_box}>\r\n\t\t\t\t<LoginReduxForm onSubmit={onSubmit} captchaUrl={captchaUrl}/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tcaptchaUrl: getCaptchaUrl(state),\r\n\tisOwner: getIsOwner(state)\r\n})\r\n\r\nexport default connect(mapStateToProps, {loginAction, startInitialize})(Login);","import React from \"react\";\r\nimport style from \"./Header.module.css\";\r\nimport {connect} from \"react-redux\";\r\nimport {logout} from \"../../Redux/auth-reducer\";\r\nimport {closeMenu, openMenu} from \"../../Redux/side-bar-reducer\";\r\n\r\nconst HeaderContainer = (props) => {\r\n\r\n\tconst {logout, openMenu} = props\r\n\r\n\tconst getLogout = () => {\r\n\t\tlogout();\r\n\t}\r\n\r\n\tconst actionOpenMenu = () => {\r\n\t\topenMenu()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<header className={`${style.header}`}>\r\n\t\t\t<div className={style.logo}>LOGO</div>\r\n\t\t\t<div className={style.menuBtn_visible}>\r\n\t\t\t\t<button onClick={actionOpenMenu}>Menu</button>\r\n\t\t\t</div>\r\n\t\t\t<div className={style.actionLogout_box}>\r\n\t\t\t\t<button onClick={getLogout}>Logout</button>\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t);\r\n}\r\n\r\nexport default connect(null, {logout, openMenu, closeMenu})(HeaderContainer);","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport Header from \"./Header\";\r\nimport {logout} from \"../../Redux/auth-reducer\";\r\n\r\nconst HeaderContainer = (props) => {\r\n\r\n\treturn <Header {...props}/>\r\n}\r\n\r\nexport default connect(null, {logout})(HeaderContainer);","export const getAvatars = (state) => {\r\n\treturn state.sideBar.avatarsData\r\n}","import style from \"../Aside.module.css\";\r\nimport {connect} from \"react-redux\";\r\nimport React from \"react\";\r\nimport {getAvatars} from \"../../../Redux/selectors/side-bar-selectors\";\r\n\r\nconst AvatarItem = ({avatarName, avatarImg}) => {\r\n\treturn (\r\n\t\t<div className={style.avatar_wrapper}>\r\n\t\t\t<div className={style.img_wrapper}>\r\n\t\t\t\t<img src={avatarImg} alt=\"userAvatar\"/>\r\n\t\t\t</div>\r\n\t\t\t<span className={style.user_name}>{avatarName}</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst AvatarsContainer = ({avatarsData}) => {\r\n\r\n\t// get an avatar object from the incoming array in props\r\n\tconst avatarItem = avatarsData.map(avatar => <AvatarItem key={avatar.id} avatarName={avatar.userName} avatarImg={avatar.userImg}/>)\r\n\r\n\treturn (\r\n\t\t<div className={style.avatars_wrapper}>\r\n\t\t\t<h5>Users</h5>\r\n\t\t\t<div className={style.avatars_box}>\r\n\t\t\t\t{avatarItem}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => ({avatarsData: getAvatars(state)})\r\n\r\n// connected avatars container to store\r\nexport default connect(mapStateToProps, null)(AvatarsContainer);","import React, {useEffect} from \"react\";\r\nimport style from \"./Aside.module.css\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport ConnectedAvatarsContainer from \"./AvatarsContainer/AvatarsContainer\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst Aside = (props) => {\r\n\r\n\tconst {menuVisible} = props\r\n\r\n\tuseEffect(() => {\r\n\t\tconst body = document.querySelector('body');\r\n\t\tbody.style.overflow = menuVisible ? 'hidden' : 'auto';\r\n\t}, [menuVisible])\r\n\r\n\treturn (\r\n\t\t<aside className={`${style.aside} ${menuVisible ? style.asideOpen : \"\"}`}>\r\n\t\t\t<ul className={style.nav}>\r\n\t\t\t\t<li><NavLink to=\"/profile\" activeClassName={style.active_link}><span>Profile</span></NavLink></li>\r\n\t\t\t\t<li><NavLink to=\"/messages\" activeClassName={style.active_link}><span>Messages</span></NavLink></li>\r\n\t\t\t\t<li><NavLink to=\"/music\" activeClassName={style.active_link}><span>Music</span></NavLink></li>\r\n\t\t\t\t<li><NavLink to=\"/notifications\" activeClassName={style.active_link}><span>Notifications</span></NavLink></li>\r\n\t\t\t\t<li><NavLink to=\"/users\" activeClassName={style.active_link}><span>Users</span></NavLink></li>\r\n\t\t\t\t<li><NavLink to=\"/settings\" activeClassName={style.active_link}><span>Settings</span></NavLink></li>\r\n\t\t\t</ul>\r\n\t\t\t<div>\r\n\t\t\t\t<ConnectedAvatarsContainer/>\r\n\t\t\t</div>\r\n\t\t</aside>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tmenuVisible: state.sideBar.menuVisible\r\n})\r\n\r\nexport default connect(mapStateToProps, null)(Aside);","import React from \"react\";\r\nimport Preloader from \"../Components/Common/Preloader/Preloader\";\r\n\r\nexport const hocWithLazyLoad = (Component) => {\r\n\treturn (props) => (\r\n\t\t<React.Suspense fallback={<Preloader/>}>\r\n\t\t\t<Component {...props} />\r\n\t\t</React.Suspense>\r\n\t);\r\n}","import React from \"react\";\r\nimport {Redirect, Route} from \"react-router-dom\";\r\n\r\nimport {hocWithLazyLoad} from \"../../hoc/hocWithLazyLoad\";\r\n\r\n// components with lazy load\r\nconst ProfileContainer = React.lazy(() => import(\"./Profile/ProfileContainer\"));\r\nconst MessagesContainer = React.lazy(() => import(\"./Messages/MessagesContainer\"));\r\nconst Music = React.lazy(() => import(\"./Music/MusicContainer\"));\r\nconst Notifications = React.lazy(() => import(\"./Notifications/NotificationsContainer\"));\r\nconst UsersContainer = React.lazy(() => import(\"./Users/UsersContainer\"));\r\nconst Settings = React.lazy(() => import(\"./Settings/SettingsContainer\"));\r\n\r\nconst MainPage = () => {\r\n\treturn (\r\n\t\t<div className=\"main_page\">\r\n\t\t\t<Route exact path=\"/\" render={() => <Redirect to=\"/profile\"/>} />\r\n\t\t\t<Route path=\"/profile/:userId?\" render={hocWithLazyLoad(ProfileContainer)} />\r\n\t\t\t<Route path=\"/messages/:userId?\" render={hocWithLazyLoad(MessagesContainer)} />\r\n\t\t\t<Route path=\"/music\" render={hocWithLazyLoad(Music)} />\r\n\t\t\t<Route path=\"/notifications\" render={hocWithLazyLoad(Notifications)} />\r\n\t\t\t<Route path=\"/users\" render={hocWithLazyLoad(UsersContainer)} />\r\n\t\t\t<Route path=\"/settings\" render={hocWithLazyLoad(Settings)} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default MainPage;","import React, {useEffect} from \"react\";\nimport './App.css';\nimport Login from \"./Components/Login\";\nimport HeaderContainer from \"./Components/Header/HeaderContainer\";\nimport Aside from \"./Components/Aside/Aside\";\nimport MainPage from \"./Components/MainPage/MainPage\";\nimport {connect} from \"react-redux\";\nimport {startInitialize} from \"./Redux/app-reducer\";\nimport Preloader from \"./Components/Common/Preloader/Preloader\";\n\nconst App = ({initialized, startInitialize, isAuth}) => {\n\n\tuseEffect(() => {\n\t\tstartInitialize()\n\t}, [])\n\n\tif (!initialized) return <Preloader/>\n\n\tif (!isAuth) return <Login/>\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<HeaderContainer/>\n\t\t\t<main className=\"main_wrapper\">\n\t\t\t\t<Aside/>\n\t\t\t\t<MainPage/>\n\t\t\t</main>\n\t\t</div>\n\t);\n}\n\nconst mapStateToProps = (state) => ({\n\tinitialized: state.app.initialized,\n\tisAuth: state.auth.isAuth\n})\n\nexport default connect(mapStateToProps, {startInitialize})(App);\n","import store from \"./Redux/redux-store\"\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {BrowserRouter, HashRouter} from \"react-router-dom\";\nimport {Provider} from \"react-redux\";\n\nReactDOM.render(\n\t<HashRouter>\n\t\t<Provider store={store}>\n\t\t\t<App/>\n\t\t</Provider>\n\t</HashRouter>,\n\tdocument.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login_wrapper\":\"Login_login_wrapper__33QG2\",\"login_box\":\"Login_login_box__mubJU\",\"login_form\":\"Login_login_form__2y_Z_\",\"login_captcha\":\"Login_login_captcha__2A5do\"};","const SET_OPEN_MENU = \"SET_OPEN_MENU\"\r\nconst SET_CLOSE_MENU = \"SET_CLOSE_MENU\"\r\n\r\n\r\n// initial state for side-bar avatars (static)\r\nconst initialState = {\r\n\tavatarsData: [\r\n\t\t{\r\n\t\t\tid: 0,\r\n\t\t\tuserImg: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT6b7WENFquctsWy8WgMSHmFJbVyJXf0lQ4R2XRAQcd2WgOK2IIfFlLUFcAcsdnpA8S_Wg&usqp=CAU',\r\n\t\t\tuserName: 'Sponge Bob'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tuserImg: 'https://image1.thematicnews.com/uploads/images/00/00/41/2015/04/30/ad358ed4d0.jpg',\r\n\t\t\tuserName: 'Volk'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tuserImg: 'https://wonder-day.com/wp-content/uploads/2020/03/Wonder-Day-Ava-105.jpg',\r\n\t\t\tuserName: 'Dasha'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 3,\r\n\t\t\tuserImg: 'https://www.meme-arsenal.com/memes/f0ffafb204862b25d0f1aa7fce251f3a.jpg',\r\n\t\t\tuserName: 'Niko'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 4,\r\n\t\t\tuserImg: 'https://drasler.ru/wp-content/uploads/2019/05/%D0%94%D0%B5%D0%B2%D1%83%D1%88%D0%BA%D0%B0-%D0%B1%D1%80%D1%8E%D0%BD%D0%B5%D1%82%D0%BA%D0%B0-%D0%BD%D0%B0%D1%80%D0%B8%D1%81%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%B0%D1%8F-%D0%BA%D0%B0%D1%80%D1%82%D0%B8%D0%BD%D0%BA%D0%B8-%D0%B8-%D1%80%D0%B8%D1%81%D1%83%D0%BD%D0%BA%D0%B8023.jpg',\r\n\t\t\tuserName: 'Julia'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 5,\r\n\t\t\tuserImg: 'https://i2.wp.com/andrey-eltsov.ru/wp-content/uploads/2017/09/DopNaAvu1.jpg',\r\n\t\t\tuserName: 'Vlad'\r\n\t\t}\r\n\t],\r\n\tmenuVisible: false\r\n}\r\n\r\nconst sideBarReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase SET_OPEN_MENU:\r\n\t\t\treturn {...state, menuVisible: action.payload}\r\n\r\n\t\tcase SET_CLOSE_MENU:\r\n\t\t\treturn {...state, menuVisible: action.payload}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\nexport const setOpenMenu = () => ({type: SET_OPEN_MENU, payload: true})\r\nexport const setCloseMenu = () => ({type: SET_CLOSE_MENU, payload: false})\r\n\r\n\r\nexport const openMenu = () => (dispatch) => {\r\n\tdispatch(setOpenMenu())\r\n}\r\nexport const closeMenu = () => (dispatch) => {\r\n\tdispatch(setCloseMenu())\r\n}\r\n\r\nexport default sideBarReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1Sdb4\",\"actionLogout_box\":\"Header_actionLogout_box__w54Gz\",\"menuBtn_visible\":\"Header_menuBtn_visible__2aNtE\",\"logo\":\"Header_logo__3IA6t\"};","import React from \"react\";\r\nimport style from \"./Preloader.module.css\";\r\n\r\nconst Preloader = () => {\r\n\treturn (\r\n\t\t<div className={style.preloader_wrapper}>\r\n\t\t\t<div className={style.fetching}>\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Preloader;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form_control\":\"FormControl_form_control__3j1S1\",\"error\":\"FormControl_error__3Jt8C\",\"errorMessage\":\"FormControl_errorMessage__3jpv-\"};","export const required = value => {\r\n\tif (value) return undefined;\r\n\treturn \"field is required\";\r\n}\r\n\r\nexport const maxLengthCreator = maxLength => value => {\r\n\tif (value && value.length > maxLength) return `Max length is ${maxLength} symbols`;\r\n\treturn undefined;\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader_wrapper\":\"Preloader_preloader_wrapper__2-yzO\",\"fetching\":\"Preloader_fetching__2T72x\",\"search-fetching\":\"Preloader_search-fetching__2v8MP\"};","import React from \"react\";\r\nimport style from \"./FormControl.module.css\";\r\n\r\n\r\nexport const Element = Element => ({input, meta, ...props}) => {\r\n\tconst hasErrors = meta.touched && meta.error\r\n\treturn (\r\n\t\t<div className={`${style.form_control} ${hasErrors && style.error}`}>\r\n\t\t\t{hasErrors && <span className={style.errorMessage}>{meta.error}</span>}\r\n\t\t\t<Element {...input} {...props} />\r\n\t\t</div>\r\n\t)\r\n};","import {profileAPI} from \"../api/api\";\r\nimport {reset} from \"redux-form\";\r\n\r\nconst SET_PROFILE = \"SET_PROFILE\"\r\nconst SET_POST = \"SET_POST\"\r\nconst SET_STATUS = \"SET_STATUS\"\r\nconst SET_UPDATE_BIO_SUCCESS = \"SET_UPDATE_BIO_SUCCESS\"\r\nconst SET_UPLOADED_PHOTO = \"SET_UPLOADED_PHOTO\"\r\n\r\nconst initialState = {\r\n\tprofile: null,\r\n\tstatus: null,\r\n\tupdatingBioSuccess: \"\",\r\n\tpostData: [\r\n\t\t{\r\n\t\t\tid: 0,\r\n\t\t\tname: 'Vlad',\r\n\t\t\tmessage: 'hi',\r\n\t\t\tlikesCount: '150',\r\n\t\t\timg: 'https://i2.wp.com/andrey-eltsov.ru/wp-content/uploads/2017/09/DopNaAvu1.jpg'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tname: 'Volk',\r\n\t\t\tmessage: 'hi, are u there??',\r\n\t\t\tlikesCount: '35',\r\n\t\t\timg: 'https://image1.thematicnews.com/uploads/images/00/00/41/2015/04/30/ad358ed4d0.jpg'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tname: 'Dasha',\r\n\t\t\tmessage: 'hi, how are u?',\r\n\t\t\tlikesCount: '1536',\r\n\t\t\timg: 'https://wonder-day.com/wp-content/uploads/2020/03/Wonder-Day-Ava-105.jpg'\r\n\t\t},\r\n\t]\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase SET_PROFILE:\r\n\t\t\treturn {...state, profile: action.payload}\r\n\r\n\t\tcase SET_STATUS:\r\n\t\t\treturn {...state, status: action.payload}\r\n\r\n\t\tcase SET_UPDATE_BIO_SUCCESS:\r\n\t\t\treturn {...state, updatingBioSuccess: action.payload}\r\n\r\n\t\tcase SET_UPLOADED_PHOTO:\r\n\t\t\treturn {...state, profile: {...state.profile, photos: action.payload}}\r\n\r\n\t\tcase SET_POST:\r\n\t\t\tif (action.payload && action.payload.replace(/\\s/g, \"\")) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state, postData: [...state.postData, {\r\n\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\tname: \"Dasha\",\r\n\t\t\t\t\t\tmessage: action.payload,\r\n\t\t\t\t\t\tlikesCount: 0,\r\n\t\t\t\t\t\timg: \"https://wonder-day.com/wp-content/uploads/2020/03/Wonder-Day-Ava-105.jpg\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn state\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n// action creators\r\nexport const setUserProfile = (profile) => ({type: SET_PROFILE, payload: profile})\r\nexport const setPostMessage = (message) => ({type: SET_POST, payload: message})\r\nexport const setUserStatus = (status) => ({type: SET_STATUS, payload: status})\r\nexport const setUpdateBioSuccess = (successStatus) => ({type: SET_UPDATE_BIO_SUCCESS, payload: successStatus})\r\nexport const setUploadedPhoto = (photos) => ({type: SET_UPLOADED_PHOTO, payload: photos})\r\n\r\n\r\n// thunk creators\r\n\r\n// adding post on profile page\r\nexport const addPostMessage = (message) => (dispatch) => {\r\n\tdispatch(setPostMessage(message))\r\n\tdispatch(reset(\"postMessageForm\"))\r\n}\r\n\r\n// receive user profile data\r\nexport const getUserProfile = (userId) => async (dispatch) => {\r\n\tconst data = await profileAPI.getProfile(userId)\r\n\tdispatch(setUserProfile(data.data))\r\n}\r\n\r\nexport const getUserStatus = (userId) => async (dispatch) => {\r\n\tconst data = await profileAPI.getStatus(userId)\r\n\tdispatch(setUserStatus(data))\r\n}\r\n\r\nexport const updateUserStatus = (status) => async (dispatch) => {\r\n\tconst data = await profileAPI.updateUserStatus(status)\r\n\tif (data.resultCode === 0) dispatch(setUserStatus(status))\r\n}\r\n\r\nexport const updateBioProfile = (profile) => async (dispatch, getState) => {\r\n\tconst userid = getState().auth.id\r\n\tlet data = await profileAPI.updateBioProfile(profile)\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(getUserProfile(userid))\r\n\t\tdispatch(setUpdateBioSuccess(\"updating was successfully!\"))\r\n\t}\r\n}\r\n\r\nexport const savePhoto = (photo) => async (dispatch) => {\r\n\tconst data = await profileAPI.savePhoto(photo)\r\n\tdispatch(setUploadedPhoto(data.data.photos))\r\n\tdispatch(setUpdateBioSuccess(\"updating was successfully!\"))\r\n}\r\n\r\nexport const updateWasSuccessfully = (successStatus) => (dispatch) => {\r\n\tdispatch(setUpdateBioSuccess(successStatus))\r\n}\r\n\r\nexport const refreshProfileInSettings = () => (dispatch, getState) => {\r\n\tconst userid = getState().auth.id\r\n\tdispatch(getUserProfile(userid))\r\n}\r\n\r\n\r\nexport default profileReducer;","import {subscribeAPI, usersAPI} from \"../api/api\";\r\n\r\nconst SET_USERS_DATA = \"SET_USERS_DATA\";\r\nconst SET_TOTAL_COUNT = \"SET_TOTAL_COUNT\";\r\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\r\nconst SET_TOGGLE_FOLLOW = \"SET_TOGGLE_FOLLOW\";\r\nconst SET_IS_FETCHING = \"SET_IS_FETCHING\";\r\nconst SET_FOLLOWING_IN_PROGRESS = \"SET_FOLLOWING_IN_PROGRESS\";\r\n\r\n\r\n// initial state for side-bar avatars (static)\r\nconst initialState = {\r\n\tusers: [],\r\n\tpageSize: 75,\r\n\tcurrentPage: 1,\r\n\ttotalCount: 0,\r\n\tisFetching: false,\r\n\tfollowingInProgress: []\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_USERS_DATA:\r\n\t\t\treturn {...state, users: action.payload}\r\n\r\n\t\tcase SET_TOTAL_COUNT:\r\n\t\t\treturn {...state, totalCount: action.payload}\r\n\r\n\t\tcase SET_CURRENT_PAGE:\r\n\t\t\treturn {...state, currentPage: action.payload}\r\n\r\n\t\tcase SET_IS_FETCHING:\r\n\t\t\treturn {...state, isFetching: action.payload}\r\n\r\n\t\tcase SET_FOLLOWING_IN_PROGRESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state, followingInProgress: action.payload.isFollowing\r\n\t\t\t\t\t? [...state.followingInProgress, action.payload.userId]\r\n\t\t\t\t\t: state.followingInProgress.filter(id => id !== action.payload.userId)\r\n\t\t\t}\r\n\r\n\t\tcase SET_TOGGLE_FOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state, users: state.users.map(u => {\r\n\t\t\t\t\tif (action.payload === u.id && !u.followed) {\r\n\t\t\t\t\t\treturn {...u, followed: true}\r\n\t\t\t\t\t} else if (action.payload === u.id && u.followed) {\r\n\t\t\t\t\t\treturn {...u, followed: false}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn u\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//action creators\r\nconst setUsers = (users) => ({type: SET_USERS_DATA, payload: users})\r\nconst setTotalCount = (totalCount) => ({type: SET_TOTAL_COUNT, payload: totalCount})\r\nconst setCurrentPage = (page) => ({type: SET_CURRENT_PAGE, payload: page})\r\nconst setToggleFollow = (userId) => ({type: SET_TOGGLE_FOLLOW, payload: userId})\r\nconst setIsFetching = (isFetching) => ({type: SET_IS_FETCHING, payload: isFetching})\r\nconst setFollowingInProgress = (isFollowing, userId) => ({type: SET_FOLLOWING_IN_PROGRESS, payload: {isFollowing, userId}})\r\n\r\n\r\n//thunk creators\r\n\r\n// receive users list\r\nexport const requestUsers = (page, pageSize) => async (dispatch) => {\r\n\tdispatch(setCurrentPage(page))\r\n\tdispatch(setIsFetching(true))\r\n\r\n\tconst data = await usersAPI.getUsers(page, pageSize)\r\n\r\n\tdispatch(setIsFetching(false))\r\n\tdispatch(setTotalCount(data.totalCount))\r\n\tdispatch(setUsers(data.items))\r\n}\r\n\r\n// subscribe\r\nexport const followAccept = (userId) => async (dispatch) => {\r\n\r\n\tdispatch(setFollowingInProgress(true, userId))\r\n\r\n\tconst data = await subscribeAPI.follow(userId)\r\n\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(setToggleFollow((userId)))\r\n\t\tdispatch(setFollowingInProgress(false, userId))\r\n\t}\r\n}\r\n\r\n// unsubscribe\r\nexport const unfollowAccept = (userId) => async (dispatch) => {\r\n\r\n\tdispatch(setFollowingInProgress(true, userId))\r\n\r\n\tconst data = await subscribeAPI.unfollow(userId)\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(setToggleFollow((userId)))\r\n\t\tdispatch(setFollowingInProgress(false, userId))\r\n\t}\r\n}\r\n\r\nexport default usersReducer;"],"sourceRoot":""}