{"version":3,"sources":["Redux/messages-reducer.js","Components/Common/FormControls/FormControls.js","Components/Aside/Aside.module.css","api/api.js","Redux/auth-reducer.js","Redux/app-reducer.js","Redux/redux-store.js","Components/LoginForm.jsx","Redux/selectors/auth-selectors.js","Components/Login.jsx","Components/Header/Header.jsx","Components/Header/HeaderContainer.jsx","Redux/selectors/side-bar-selectors.js","Components/Aside/AvatarsContainer/AvatarsContainer.jsx","Components/Aside/Aside.jsx","hoc/hocWithLazyLoad.js","Components/MainPage/MainPage.jsx","App.js","index.js","Components/Login.module.css","Redux/side-bar-reducer.js","Components/Header/Header.module.css","Components/Common/Preloader/Preloader.jsx","Components/Common/FormControls/FormControl.module.css","utils/validators.js","Components/Common/Preloader/Preloader.module.css","Redux/profile-reducer.js","Redux/users-reducer.js"],"names":["SEND_MY_MESSAGE_TEXT","initialState","usersWithDialogs","id","userImg","userName","dialogsMessages","message","sendMessage","userId","body","dispatch","type","payload","sendMyMessage","reset","messagesReducer","state","action","replace","Element","input","meta","props","hasErrors","touched","error","className","style","form_control","errorMessage","module","exports","instance","axios","baseURL","withCredentials","headers","profileAPI","getProfile","get","getStatus","then","response","data","updateUserStatus","status","put","updateBioProfile","profile","savePhoto","photoFile","formData","FormData","append","usersAPI","getUsers","currentPage","pageSize","authAPI","me","login","email","password","rememberMe","captcha","post","logout","delete","subscribeAPI","follow","unfollow","securityAPI","getCaptcha","SET_USER_DATA","SET_CAPTCHA","SET_OWNER","isAuth","isOwner","captchaUrl","setUserData","setCaptchaUrl","setOwner","owner","getAuthUserData","a","resultCode","getCaptchaUrl","url","authReducer","INITIALIZED_SUCCESS","initialized","startInitialize","promiseMe","Promise","all","appReducer","reducers","combineReducers","sideBar","sideBarReducer","usersPage","usersReducer","auth","app","profilePage","profileReducer","messagesPage","form","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","Input","LoginReduxForm","reduxForm","handleSubmit","onSubmit","login_form","Field","name","placeholder","component","validate","required","login_captcha","src","alt","getIsOwner","connect","loginAction","to","login_wrapper","login_box","values","openMenu","closeMenu","header","logo","menuBtn_visible","onClick","actionLogout_box","Header","getAvatars","avatarsData","AvatarItem","avatarName","avatarImg","avatar_wrapper","img_wrapper","user_name","avatarItem","map","avatar","avatars_wrapper","avatars_box","menuVisible","useEffect","document","querySelector","overflow","aside","asideOpen","nav","activeClassName","active_link","hocWithLazyLoad","Component","Suspense","fallback","Preloader","ProfileContainer","React","lazy","MessagesContainer","Music","Notifications","UsersContainer","Settings","MainPage","exact","path","render","ReactDOM","getElementById","SET_OPEN_MENU","SET_CLOSE_MENU","preloader_wrapper","fetching","value","maxLengthCreator","maxLength","length","SET_PROFILE","SET_POST","SET_STATUS","SET_UPDATE_BIO_SUCCESS","SET_UPLOADED_PHOTO","updatingBioSuccess","postData","likesCount","img","setUserStatus","setUpdateBioSuccess","successStatus","addPostMessage","setPostMessage","getUserProfile","getUserStatus","getState","userid","photo","photos","updateWasSuccessfully","refreshProfileInSettings","SET_USERS_DATA","SET_TOTAL_COUNT","SET_CURRENT_PAGE","SET_TOGGLE_FOLLOW","SET_IS_FETCHING","SET_FOLLOWING_IN_PROGRESS","users","totalCount","isFetching","followingInProgress","setCurrentPage","page","setToggleFollow","setIsFetching","setFollowingInProgress","isFollowing","requestUsers","items","followAccept","unfollowAccept","filter","u","followed"],"mappings":"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","file":"static/js/main.e9b3f946.chunk.js","sourcesContent":["import {reset} from \"redux-form\";\r\n\r\nconst SEND_MY_MESSAGE_TEXT = \"SEND_MY_MESSAGE_TEXT\"\r\n\r\n\r\nconst initialState = {\r\n\tusersWithDialogs: [\r\n\t\t{\r\n\t\t\tid: 3450,\r\n\t\t\tuserImg: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT6b7WENFquctsWy8WgMSHmFJbVyJXf0lQ4R2XRAQcd2WgOK2IIfFlLUFcAcsdnpA8S_Wg&usqp=CAU',\r\n\t\t\tuserName: 'Sponge Bob'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 4560,\r\n\t\t\tuserImg: 'https://image1.thematicnews.com/uploads/images/00/00/41/2015/04/30/ad358ed4d0.jpg',\r\n\t\t\tuserName: 'Volk'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2340,\r\n\t\t\tuserImg: 'https://wonder-day.com/wp-content/uploads/2020/03/Wonder-Day-Ava-105.jpg',\r\n\t\t\tuserName: 'Dasha'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 3440,\r\n\t\t\tuserImg: 'https://www.meme-arsenal.com/memes/f0ffafb204862b25d0f1aa7fce251f3a.jpg',\r\n\t\t\tuserName: 'Niko'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 4000,\r\n\t\t\tuserImg: 'https://drasler.ru/wp-content/uploads/2019/05/%D0%94%D0%B5%D0%B2%D1%83%D1%88%D0%BA%D0%B0-%D0%B1%D1%80%D1%8E%D0%BD%D0%B5%D1%82%D0%BA%D0%B0-%D0%BD%D0%B0%D1%80%D0%B8%D1%81%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%B0%D1%8F-%D0%BA%D0%B0%D1%80%D1%82%D0%B8%D0%BD%D0%BA%D0%B8-%D0%B8-%D1%80%D0%B8%D1%81%D1%83%D0%BD%D0%BA%D0%B8023.jpg',\r\n\t\t\tuserName: 'July'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 5567,\r\n\t\t\tuserImg: 'https://i2.wp.com/andrey-eltsov.ru/wp-content/uploads/2017/09/DopNaAvu1.jpg',\r\n\t\t\tuserName: 'Vlad'\r\n\t\t}\r\n\t],\r\n\tdialogsMessages: [{id: 0, message: 'hi'}, {id: 1, message: 'how are u?'}, {id: 2, message: 'maybe go beer?'}],\r\n}\r\n\r\nconst messagesReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase SEND_MY_MESSAGE_TEXT:\r\n\t\t\tif(action.payload && action.payload.replace(/\\s/g, \"\")) {\r\n\t\t\treturn {...state, dialogsMessages: [...state.dialogsMessages, {\r\n\t\t\t\tid: 3,\r\n\t\t\t\tmessage: action.payload\r\n\t\t\t\t}]}\r\n\t\t\t}\r\n\t\t\treturn state\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//action creators\r\nexport const sendMyMessage = (body) => ({type: SEND_MY_MESSAGE_TEXT, payload: body})\r\n\r\n\r\n// thunk creators\r\n\r\n// send message in dialogs\r\nexport const sendMessage = (userId, body) => (dispatch) => {\r\n\tdispatch(sendMyMessage(body))\r\n\tdispatch(reset(\"addDialogMessageForm\"))\r\n}\r\n\r\nexport default messagesReducer;","import React from \"react\";\r\nimport style from \"./FormControl.module.css\";\r\n\r\n\r\nexport const Element = Element => ({input, meta, ...props}) => {\r\n\tconst hasErrors = meta.touched && meta.error\r\n\treturn (\r\n\t\t<div className={`${style.form_control} ${hasErrors && style.error}`}>\r\n\t\t\t{hasErrors && <span className={style.errorMessage}>{meta.error}</span>}\r\n\t\t\t<Element {...input} {...props} />\r\n\t\t</div>\r\n\t)\r\n};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"aside\":\"Aside_aside__11b96\",\"asideOpen\":\"Aside_asideOpen__2HEwF\",\"nav\":\"Aside_nav__LAQWh\",\"active_link\":\"Aside_active_link__6zfJc\",\"avatars_wrapper\":\"Aside_avatars_wrapper__2968D\",\"avatars_box\":\"Aside_avatars_box__Nq9mM\",\"avatar_wrapper\":\"Aside_avatar_wrapper__vA0o8\",\"img_wrapper\":\"Aside_img_wrapper___ILMY\",\"user_name\":\"Aside_user_name__32glW\"};","import * as axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n\tbaseURL: `https://social-network.samuraijs.com/api/1.0/`,\r\n\twithCredentials: true,\r\n\theaders: {\r\n\t\t'API-KEY': 'a1cfc85a-7e70-4120-8bed-62fbd526678c'\r\n\t\t// 'API-KEY': 'bb8e013c-9223-4dee-8a5a-b96156c04ec6'\r\n\t}\r\n})\r\n\r\nexport const profileAPI = {\r\n\tgetProfile(userId) {\r\n\t\treturn instance.get(`profile/${userId}`)\r\n\t},\r\n\tgetStatus(userId) {\r\n\t\treturn instance.get(`profile/status/${userId}`).then(response => response.data)\r\n\t},\r\n\tupdateUserStatus(status) {\r\n\t\treturn instance.put(`profile/status`, {status}).then(response => response.data)\r\n\t},\r\n\tupdateBioProfile(profile) {\r\n\t\treturn instance.put(`profile`, profile).then(response => response.data)\r\n\t},\r\n\tsavePhoto(photoFile) {\r\n\t\tconst formData = new FormData()\r\n\t\tformData.append(\"image\", photoFile)\r\n\t\treturn instance.put(`profile/photo`, formData, {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'multipart/form-data'\r\n\t\t\t}\r\n\t\t}).then(response => response.data)\r\n\t}\r\n\r\n}\r\n\r\nexport const usersAPI = {\r\n\tgetUsers(currentPage, pageSize) {\r\n\t\treturn instance.get(`users?page=${currentPage}&count=${pageSize}`).then(response => response.data)\r\n\t}\r\n}\r\n\r\nexport const authAPI = {\r\n\tme() {\r\n\t\treturn instance.get(`auth/me`).then(response => response.data)\r\n\t},\r\n\tlogin(email, password, rememberMe = false, captcha = null) {\r\n\t\treturn instance.post(`auth/login`, {email, password, rememberMe, captcha}).then(response => response.data)\r\n\t},\r\n\tlogout() {\r\n\t\treturn instance.delete(`auth/login`).then(response => response.data)\r\n\t}\r\n}\r\n\r\nexport const subscribeAPI = {\r\n\tfollow(userId) {\r\n\t\treturn instance.post(`follow/${userId}`).then(response => response.data)\r\n\t},\r\n\tunfollow(userId) {\r\n\t\treturn instance.delete(`follow/${userId}`).then(response => response.data)\r\n\t}\r\n}\r\n\r\nexport const securityAPI = {\r\n\tgetCaptcha() {\r\n\t\treturn instance.get(`security/get-captcha-url`).then(response => response.data)\r\n\t}\r\n}","import {authAPI, securityAPI} from \"../api/api\";\r\n\r\nconst SET_USER_DATA = \"SET_USER_DATA\"\r\nconst SET_CAPTCHA = \"SET_CAPTCHA\"\r\nconst SET_OWNER = \"SET_OWNER\"\r\n\r\nlet initialState = {\r\n\tid: null,\r\n\temail: null,\r\n\tlogin: null,\r\n\tisAuth: false,\r\n\tisOwner: false,\r\n\tcaptchaUrl: null\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase SET_USER_DATA:\r\n\t\t\treturn {...state, ...action.payload}\r\n\r\n\t\tcase SET_CAPTCHA:\r\n\t\t\treturn {...state, captchaUrl: action.payload}\r\n\r\n\t\tcase SET_OWNER:\r\n\t\t\treturn {...state, isOwner: action.payload}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//action creators\r\nexport const setUserData = (id, email, login, isAuth) => ({type: SET_USER_DATA, payload: {id, email, login, isAuth}})\r\nexport const setCaptchaUrl = (captchaUrl) => ({type: SET_CAPTCHA, payload: captchaUrl})\r\nexport const setOwner = (owner) => ({type: SET_OWNER, payload: owner})\r\n\r\n\r\n// thunk creators\r\n\r\n// receive authorized user data\r\nexport const getAuthUserData = () => async (dispatch) => {\r\n\tlet data = await authAPI.me()\r\n\tif (data.resultCode === 0) {\r\n\t\tlet {id, email, login} = data.data\r\n\t\tdispatch(setUserData(id, email, login, true))\r\n\t\tdispatch(setOwner(true))\r\n\t}\r\n}\r\n\r\n// login\r\nexport const loginAction = (email, password, rememberMe, captcha) => async (dispatch) => {\r\n\tconst data = await authAPI.login(email, password, rememberMe, captcha)\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(getAuthUserData())\r\n\t} else {\r\n\t\tif (data.resultCode === 10) {\r\n\t\t\tdispatch(getCaptchaUrl())\r\n\t\t}\r\n\t}\r\n}\r\n\r\n// logout\r\nexport const logout = () => async (dispatch) => {\r\n\tconst data = await authAPI.logout()\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(setUserData(null, null, null, false))\r\n\t\tdispatch(setCaptchaUrl(null))\r\n\t\tdispatch(setOwner(false))\r\n\t}\r\n}\r\n\r\n// receive captcha\r\nexport const getCaptchaUrl = () => async (dispatch) => {\r\n\tdebugger\r\n\tconst data = await securityAPI.getCaptcha()\r\n\tdispatch(setCaptchaUrl(data.url))\r\n}\r\n\r\n\r\nexport default authReducer;","import {getAuthUserData} from \"./auth-reducer\";\r\n\r\nconst INITIALIZED_SUCCESS = \"INITIALIZED_SUCCESS\"\r\n\r\nconst initialState = {\r\n\tinitialized: false\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase INITIALIZED_SUCCESS:\r\n\t\t\treturn {...state, initialized: true}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//action creators\r\nexport const initializeSuccess = () => ({type: INITIALIZED_SUCCESS})\r\n\r\n\r\n//thunk creators\r\n\r\n//initialization application\r\nexport const startInitialize = () => (dispatch) => {\r\n\tconst promiseMe = dispatch(getAuthUserData())\r\n\tPromise.all([promiseMe]).then(() => {\r\n\t\tdispatch(initializeSuccess())\r\n\t})\r\n}\r\n\r\nexport default appReducer;","import {applyMiddleware, combineReducers, compose, createStore} from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport {reducer as formReducer} from \"redux-form\"\r\nimport sideBarReducer from \"./side-bar-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport appReducer from \"./app-reducer\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport messagesReducer from \"./messages-reducer\";\r\n\r\nconst reducers = combineReducers({\r\n\tsideBar: sideBarReducer,\r\n\tusersPage: usersReducer,\r\n\tauth: authReducer,\r\n\tapp: appReducer,\r\n\tprofilePage: profileReducer,\r\n\tmessagesPage: messagesReducer,\r\n\tform: formReducer\r\n})\r\n\r\n// this is for the redux tool in the browser\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)))\r\n\r\nwindow.store = store;\r\n\r\nexport default store;","import {Element} from \"./Common/FormControls/FormControls\";\r\nimport style from \"./Login.module.css\";\r\nimport {Field, reduxForm} from \"redux-form\";\r\nimport {required} from \"../utils/validators\";\r\nimport React from \"react\";\r\nimport {NavLink} from \"react-router-dom\";\r\n\r\nconst Input = Element(\"input\")\r\n\r\nconst LoginForm = ({handleSubmit, captchaUrl}) => {\r\n\treturn (\r\n\t\t<form onSubmit={handleSubmit} className={style.login_form} action=\"\">\r\n\t\t\t<h5>Login</h5>\r\n\t\t\t<span>\r\n\t\t\t\t<Field name=\"email\" placeholder=\"email\" component={Input} validate={[required]}/>\r\n\t\t\t</span>\r\n\t\t\t<span>\r\n\t\t\t\t<Field name=\"password\" type=\"password\" placeholder=\"password\" component={Input} validate={[required]}/>\r\n\t\t\t</span>\r\n\t\t\t<label>\r\n\t\t\t\t<Field name=\"rememberMe\" component={Input} type=\"checkbox\"/>\r\n\t\t\t\t<span>Remember me</span>\r\n\t\t\t</label>\r\n\t\t\t{captchaUrl && <span className={style.login_captcha}>\r\n\t\t\t\t<Field name=\"captcha\" placeholder=\"captcha\" component={Input}/>\r\n\t\t\t\t<img src={captchaUrl} alt=\"captcha\"/>\r\n\t\t\t</span>}\r\n\t\t\t<div>\r\n\t\t\t\t<button>Login</button>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({form: \"login\"})(LoginForm)\r\n\r\nexport default LoginReduxForm;","export const getIsAuth = (state) => {\r\n\treturn state.auth.isAuth\r\n}\r\n\r\nexport const getCaptchaUrl = (state) => {\r\n\treturn state.auth.captchaUrl\r\n}\r\n\r\nexport const getIsOwner = (state) => {\r\n\treturn state.auth.isOwner\r\n}","import React, {useEffect} from 'react';\r\nimport style from './Login.module.css'\r\nimport {connect} from \"react-redux\";\r\nimport {loginAction} from \"../Redux/auth-reducer\";\r\nimport LoginReduxForm from \"./LoginForm\";\r\nimport {startInitialize} from \"../Redux/app-reducer\";\r\nimport {getCaptchaUrl, getIsAuth, getIsOwner} from \"../Redux/selectors/auth-selectors\";\r\nimport {Redirect} from \"react-router-dom\";\r\n\r\nconst Login = (props) => {\r\n\r\n\tconst {loginAction, captchaUrl, isOwner} = props\r\n\r\n\tconst onSubmit = (values) => {\r\n\t\tloginAction(values.email, values.password, values.rememberMe, values.captcha)\r\n\t}\r\n\r\n\tif(isOwner) return <Redirect to={\"/\"}/>\r\n\r\n\treturn (\r\n\t\t<div className={style.login_wrapper}>\r\n\t\t\t<div className={style.login_box}>\r\n\t\t\t\t<LoginReduxForm onSubmit={onSubmit} captchaUrl={captchaUrl}/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tcaptchaUrl: getCaptchaUrl(state),\r\n\tisOwner: getIsOwner(state)\r\n})\r\n\r\nexport default connect(mapStateToProps, {loginAction, startInitialize})(Login);","import React from \"react\";\r\nimport style from \"./Header.module.css\";\r\nimport {connect} from \"react-redux\";\r\nimport {logout} from \"../../Redux/auth-reducer\";\r\nimport {closeMenu, openMenu} from \"../../Redux/side-bar-reducer\";\r\n\r\nconst HeaderContainer = (props) => {\r\n\r\n\tconst {logout, openMenu} = props\r\n\r\n\tconst getLogout = () => {\r\n\t\tlogout();\r\n\t}\r\n\r\n\tconst actionOpenMenu = () => {\r\n\t\topenMenu()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<header className={`${style.header}`}>\r\n\t\t\t<div className={style.logo}>LOGO</div>\r\n\t\t\t<div className={style.menuBtn_visible}><button onClick={actionOpenMenu}>Menu</button></div>\r\n\t\t\t<div className={style.actionLogout_box}><button onClick={getLogout}>Logout</button></div>\r\n\t\t</header>\r\n\t);\r\n}\r\n\r\nexport default connect(null, {logout, openMenu, closeMenu})(HeaderContainer);","import React from \"react\";\r\nimport {connect} from \"react-redux\";\r\nimport Header from \"./Header\";\r\nimport {logout} from \"../../Redux/auth-reducer\";\r\n\r\nconst HeaderContainer = (props) => {\r\n\r\n\treturn <Header {...props}/>\r\n}\r\n\r\nexport default connect(null, {logout})(HeaderContainer);","export const getAvatars = (state) => {\r\n\treturn state.sideBar.avatarsData\r\n}","import style from \"../Aside.module.css\";\r\nimport {connect} from \"react-redux\";\r\nimport React from \"react\";\r\nimport {getAvatars} from \"../../../Redux/selectors/side-bar-selectors\";\r\n\r\nconst AvatarItem = ({avatarName, avatarImg}) => {\r\n\treturn (\r\n\t\t<div className={style.avatar_wrapper}>\r\n\t\t\t<div className={style.img_wrapper}>\r\n\t\t\t\t<img src={avatarImg} alt=\"userAvatar\"/>\r\n\t\t\t</div>\r\n\t\t\t<span className={style.user_name}>{avatarName}</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst AvatarsContainer = ({avatarsData}) => {\r\n\r\n\t// get an avatar object from the incoming array in props\r\n\tconst avatarItem = avatarsData.map(avatar => <AvatarItem key={avatar.id} avatarName={avatar.userName} avatarImg={avatar.userImg}/> )\r\n\r\n\treturn (\r\n\t\t<div className={style.avatars_wrapper}>\r\n\t\t\t<h5>Users</h5>\r\n\t\t\t<div className={style.avatars_box}>\r\n\t\t\t\t{avatarItem}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => ({avatarsData: getAvatars(state)})\r\n\r\n// connected avatars container to store\r\nexport default connect(mapStateToProps, null)(AvatarsContainer);","import React, {useEffect} from \"react\";\r\nimport style from \"./Aside.module.css\";\r\nimport {NavLink} from \"react-router-dom\";\r\nimport ConnectedAvatarsContainer from \"./AvatarsContainer/AvatarsContainer\";\r\nimport {connect} from \"react-redux\";\r\n\r\nconst Aside = (props) => {\r\n\r\n\tconst {menuVisible} = props\r\n\r\n\tuseEffect(() => {\r\n\t\tconst body = document.querySelector('body');\r\n\t\tbody.style.overflow = menuVisible ? 'hidden' : 'auto';\r\n\t}, [menuVisible])\r\n\r\n\treturn (\r\n\t\t<aside className={`${style.aside} ${menuVisible ? style.asideOpen : \"\"}`}>\r\n\t\t\t\t<ul className={style.nav}>\r\n\t\t\t\t\t<li><NavLink to=\"/profile\" activeClassName={style.active_link}><span>Profile</span></NavLink></li>\r\n\t\t\t\t\t<li><NavLink to=\"/messages\" activeClassName={style.active_link}><span>Messages</span></NavLink></li>\r\n\t\t\t\t\t<li><NavLink to=\"/music\" activeClassName={style.active_link}><span>Music</span></NavLink></li>\r\n\t\t\t\t\t<li><NavLink to=\"/notifications\" activeClassName={style.active_link}><span>Notifications</span></NavLink></li>\r\n\t\t\t\t\t<li><NavLink to=\"/users\" activeClassName={style.active_link}><span>Users</span></NavLink></li>\r\n\t\t\t\t\t<li><NavLink to=\"/settings\" activeClassName={style.active_link}><span>Settings</span></NavLink></li>\r\n\t\t\t\t</ul>\r\n\t\t\t<div>\r\n\t\t\t\t<ConnectedAvatarsContainer/>\r\n\t\t\t</div>\r\n\t\t</aside>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tmenuVisible: state.sideBar.menuVisible\r\n})\r\n\r\nexport default connect(mapStateToProps, null)(Aside);","import React from \"react\";\r\nimport Preloader from \"../Components/Common/Preloader/Preloader\";\r\n\r\nexport const hocWithLazyLoad = (Component) => {\r\n\treturn (props) => (\r\n\t\t<React.Suspense fallback={<Preloader />}>\r\n\t\t\t<Component {...props} />\r\n\t\t</React.Suspense>\r\n\t);\r\n}","import React from \"react\";\r\nimport {Redirect, Route} from \"react-router-dom\";\r\n\r\nimport {hocWithLazyLoad} from \"../../hoc/hocWithLazyLoad\";\r\n\r\n// components with lazy load\r\nconst ProfileContainer = React.lazy(() => import(\"./Profile/ProfileContainer\"));\r\nconst MessagesContainer = React.lazy(() => import(\"./Messages/MessagesContainer\"));\r\nconst Music = React.lazy(() => import(\"./Music/MusicContainer\"));\r\nconst Notifications = React.lazy(() => import(\"./Notifications/NotificationsContainer\"));\r\nconst UsersContainer = React.lazy(() => import(\"./Users/UsersContainer\"));\r\nconst Settings = React.lazy(() => import(\"./Settings/SettingsContainer\"));\r\n\r\nconst MainPage = () => {\r\n\treturn (\r\n\t\t<div className=\"main_page\">\r\n\t\t\t<Route exact path=\"/\" render={() => <Redirect to=\"/profile\"/>} />\r\n\t\t\t<Route path=\"/profile/:userId?\" render={hocWithLazyLoad(ProfileContainer)} />\r\n\t\t\t<Route path=\"/messages/:userId?\" render={hocWithLazyLoad(MessagesContainer)} />\r\n\t\t\t<Route path=\"/music\" render={hocWithLazyLoad(Music)} />\r\n\t\t\t<Route path=\"/notifications\" render={hocWithLazyLoad(Notifications)} />\r\n\t\t\t<Route path=\"/users\" render={hocWithLazyLoad(UsersContainer)} />\r\n\t\t\t<Route path=\"/settings\" render={hocWithLazyLoad(Settings)} />\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default MainPage;","import React, {useEffect} from \"react\";\nimport './App.css';\nimport Login from \"./Components/Login\";\nimport HeaderContainer from \"./Components/Header/HeaderContainer\";\nimport Aside from \"./Components/Aside/Aside\";\nimport MainPage from \"./Components/MainPage/MainPage\";\nimport {connect} from \"react-redux\";\nimport {startInitialize} from \"./Redux/app-reducer\";\nimport Preloader from \"./Components/Common/Preloader/Preloader\";\n\nconst App = ({initialized, startInitialize, isAuth}) => {\n\n\tuseEffect(() => {startInitialize()}, [])\n\n\tif (!initialized) return <Preloader />\n\n\tif (!isAuth) return <Login/>\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<HeaderContainer/>\n\t\t\t<main className=\"main_wrapper\">\n\t\t\t\t<Aside/>\n\t\t\t\t<MainPage/>\n\t\t\t</main>\n\t\t</div>\n\t);\n}\n\nconst mapStateToProps = (state) => ({\n\tinitialized: state.app.initialized,\n\tisAuth: state.auth.isAuth\n})\n\nexport default connect(mapStateToProps, {startInitialize})(App);\n","import store from \"./Redux/redux-store\"\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport {BrowserRouter, HashRouter} from \"react-router-dom\";\nimport {Provider} from \"react-redux\";\n\nReactDOM.render(\n\t<HashRouter>\n\t\t<Provider store={store}>\n\t\t\t<App/>\n\t\t</Provider>\n\t</HashRouter>,\n\tdocument.getElementById('root')\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login_wrapper\":\"Login_login_wrapper__33QG2\",\"login_box\":\"Login_login_box__mubJU\",\"login_form\":\"Login_login_form__2y_Z_\",\"login_captcha\":\"Login_login_captcha__2A5do\"};","\r\nconst SET_OPEN_MENU = \"SET_OPEN_MENU\"\r\nconst SET_CLOSE_MENU = \"SET_CLOSE_MENU\"\r\n\r\n\r\n// initial state for side-bar avatars (static)\r\nconst initialState = {\r\n\tavatarsData: [\r\n\t\t{\r\n\t\t\tid: 0,\r\n\t\t\tuserImg: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT6b7WENFquctsWy8WgMSHmFJbVyJXf0lQ4R2XRAQcd2WgOK2IIfFlLUFcAcsdnpA8S_Wg&usqp=CAU',\r\n\t\t\tuserName: 'Sponge Bob'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tuserImg: 'https://image1.thematicnews.com/uploads/images/00/00/41/2015/04/30/ad358ed4d0.jpg',\r\n\t\t\tuserName: 'Volk'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tuserImg: 'https://wonder-day.com/wp-content/uploads/2020/03/Wonder-Day-Ava-105.jpg',\r\n\t\t\tuserName: 'Dasha'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 3,\r\n\t\t\tuserImg: 'https://www.meme-arsenal.com/memes/f0ffafb204862b25d0f1aa7fce251f3a.jpg',\r\n\t\t\tuserName: 'Niko'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 4,\r\n\t\t\tuserImg: 'https://drasler.ru/wp-content/uploads/2019/05/%D0%94%D0%B5%D0%B2%D1%83%D1%88%D0%BA%D0%B0-%D0%B1%D1%80%D1%8E%D0%BD%D0%B5%D1%82%D0%BA%D0%B0-%D0%BD%D0%B0%D1%80%D0%B8%D1%81%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%B0%D1%8F-%D0%BA%D0%B0%D1%80%D1%82%D0%B8%D0%BD%D0%BA%D0%B8-%D0%B8-%D1%80%D0%B8%D1%81%D1%83%D0%BD%D0%BA%D0%B8023.jpg',\r\n\t\t\tuserName: 'July'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 5,\r\n\t\t\tuserImg: 'https://i2.wp.com/andrey-eltsov.ru/wp-content/uploads/2017/09/DopNaAvu1.jpg',\r\n\t\t\tuserName: 'Vlad'\r\n\t\t}\r\n\t],\r\n\tmenuVisible: false\r\n}\r\n\r\nconst sideBarReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase SET_OPEN_MENU:\r\n\t\t\treturn {...state, menuVisible: action.payload}\r\n\r\n\t\tcase SET_CLOSE_MENU:\r\n\t\t\treturn {...state, menuVisible: action.payload}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\nexport const setOpenMenu = () => ({type: SET_OPEN_MENU, payload: true})\r\nexport const setCloseMenu = () => ({type: SET_CLOSE_MENU, payload: false})\r\n\r\n\r\nexport const openMenu = () => (dispatch) => {\r\n\tdispatch(setOpenMenu())\r\n}\r\nexport const closeMenu = () => (dispatch) => {\r\n\tdispatch(setCloseMenu())\r\n}\r\n\r\nexport default sideBarReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1Sdb4\",\"actionLogout_box\":\"Header_actionLogout_box__w54Gz\",\"menuBtn_visible\":\"Header_menuBtn_visible__2aNtE\",\"logo\":\"Header_logo__3IA6t\"};","import React from \"react\";\r\nimport style from \"./Preloader.module.css\";\r\n\r\nconst Preloader = () => {\r\n\treturn (\r\n\t\t<div className={style.preloader_wrapper}>\r\n\t\t\t<div className={style.fetching}>\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Preloader;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form_control\":\"FormControl_form_control__3j1S1\",\"error\":\"FormControl_error__3Jt8C\",\"errorMessage\":\"FormControl_errorMessage__3jpv-\"};","export const required = value => {\r\n\tif(value) return undefined;\r\n\treturn \"field is required\";\r\n}\r\n\r\nexport const maxLengthCreator = maxLength => value => {\r\n\tif(value && value.length > maxLength) return `Max length is ${maxLength} symbols`;\r\n\treturn undefined;\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader_wrapper\":\"Preloader_preloader_wrapper__2-yzO\",\"fetching\":\"Preloader_fetching__2T72x\",\"search-fetching\":\"Preloader_search-fetching__2v8MP\"};","import {profileAPI} from \"../api/api\";\r\nimport {reset} from \"redux-form\";\r\n\r\nconst SET_PROFILE = \"SET_PROFILE\"\r\nconst SET_POST = \"SET_POST\"\r\nconst SET_STATUS = \"SET_STATUS\"\r\nconst SET_UPDATE_BIO_SUCCESS = \"SET_UPDATE_BIO_SUCCESS\"\r\nconst SET_UPLOADED_PHOTO = \"SET_UPLOADED_PHOTO\"\r\n\r\nconst initialState = {\r\n\tprofile: null,\r\n\tstatus: null,\r\n\tupdatingBioSuccess: \"\",\r\n\tpostData: [\r\n\t\t{\r\n\t\t\tid: 0,\r\n\t\t\tname: 'Vlad',\r\n\t\t\tmessage: 'hi',\r\n\t\t\tlikesCount: '150',\r\n\t\t\timg: 'https://i2.wp.com/andrey-eltsov.ru/wp-content/uploads/2017/09/DopNaAvu1.jpg'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tname: 'Volk',\r\n\t\t\tmessage: 'hi, are u there??',\r\n\t\t\tlikesCount: '35',\r\n\t\t\timg: 'https://image1.thematicnews.com/uploads/images/00/00/41/2015/04/30/ad358ed4d0.jpg'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tname: 'Dasha',\r\n\t\t\tmessage: 'hi, how are u?',\r\n\t\t\tlikesCount: '1536',\r\n\t\t\timg: 'https://wonder-day.com/wp-content/uploads/2020/03/Wonder-Day-Ava-105.jpg'\r\n\t\t},\r\n\t]\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase SET_PROFILE:\r\n\t\t\treturn {...state, profile: action.payload}\r\n\r\n\t\tcase SET_STATUS:\r\n\t\t\treturn {...state, status: action.payload}\r\n\r\n\t\tcase SET_UPDATE_BIO_SUCCESS:\r\n\t\t\treturn {...state, updatingBioSuccess: action.payload}\r\n\r\n\t\tcase SET_UPLOADED_PHOTO:\r\n\t\t\treturn {...state, profile: {...state.profile, photos: action.payload}}\r\n\r\n\t\tcase SET_POST:\r\n\t\t\tif (action.payload && action.payload.replace(/\\s/g, \"\")) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state, postData: [...state.postData, {\r\n\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\tname: \"Dasha\",\r\n\t\t\t\t\t\tmessage: action.payload,\r\n\t\t\t\t\t\tlikesCount: 0,\r\n\t\t\t\t\t\timg: \"https://wonder-day.com/wp-content/uploads/2020/03/Wonder-Day-Ava-105.jpg\"\r\n\t\t\t\t\t}]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn state\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n// action creators\r\nexport const setUserProfile = (profile) => ({type: SET_PROFILE, payload: profile})\r\nexport const setPostMessage = (message) => ({type: SET_POST, payload: message})\r\nexport const setUserStatus = (status) => ({type: SET_STATUS, payload: status})\r\nexport const setUpdateBioSuccess = (successStatus) => ({type: SET_UPDATE_BIO_SUCCESS, payload: successStatus})\r\nexport const setUploadedPhoto = (photos) => ({type: SET_UPLOADED_PHOTO, payload: photos})\r\n\r\n\r\n// thunk creators\r\n\r\n// adding post on profile page\r\nexport const addPostMessage = (message) => (dispatch) => {\r\n\tdispatch(setPostMessage(message))\r\n\tdispatch(reset(\"postMessageForm\"))\r\n}\r\n\r\n// receive user profile data\r\nexport const getUserProfile = (userId) => async (dispatch) => {\r\n\tconst data = await profileAPI.getProfile(userId)\r\n\tdispatch(setUserProfile(data.data))\r\n}\r\n\r\nexport const getUserStatus = (userId) => async (dispatch) => {\r\n\tconst data = await profileAPI.getStatus(userId)\r\n\tdispatch(setUserStatus(data))\r\n}\r\n\r\nexport const updateUserStatus = (status) => async (dispatch) => {\r\n\tconst data = await profileAPI.updateUserStatus(status)\r\n\tif(data.resultCode === 0) dispatch(setUserStatus(status))\r\n}\r\n\r\nexport const updateBioProfile = (profile) => async (dispatch, getState) => {\r\n\tconst userid = getState().auth.id\r\n\tlet data = await profileAPI.updateBioProfile(profile)\r\n\tif(data.resultCode === 0) {\r\n\t\tdispatch(getUserProfile(userid))\r\n\t\tdispatch(setUpdateBioSuccess(\"updating was successfully!\"))\r\n\t}\r\n}\r\n\r\nexport const savePhoto = (photo) => async (dispatch) => {\r\n\tconst data = await profileAPI.savePhoto(photo)\r\n\tdispatch(setUploadedPhoto(data.data.photos))\r\n\tdispatch(setUpdateBioSuccess(\"updating was successfully!\"))\r\n}\r\n\r\nexport const updateWasSuccessfully = (successStatus) => (dispatch) => {\r\n\t\tdispatch(setUpdateBioSuccess(successStatus))\r\n}\r\n\r\nexport const refreshProfileInSettings = () => (dispatch, getState) => {\r\n\tconst userid = getState().auth.id\r\n\tdispatch(getUserProfile(userid))\r\n}\r\n\r\n\r\nexport default profileReducer;","import {followedAPI, subscribeAPI, usersAPI} from \"../api/api\";\r\n\r\nconst SET_USERS_DATA = \"SET_USERS_DATA\";\r\nconst SET_TOTAL_COUNT = \"SET_TOTAL_COUNT\";\r\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\r\nconst SET_TOGGLE_FOLLOW = \"SET_TOGGLE_FOLLOW\";\r\nconst SET_IS_FETCHING = \"SET_IS_FETCHING\";\r\nconst SET_FOLLOWING_IN_PROGRESS = \"SET_FOLLOWING_IN_PROGRESS\";\r\n\r\n\r\n// initial state for side-bar avatars (static)\r\nconst initialState = {\r\n\tusers: [],\r\n\tpageSize: 75,\r\n\tcurrentPage: 1,\r\n\ttotalCount: 0,\r\n\tisFetching: false,\r\n\tfollowingInProgress: []\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_USERS_DATA:\r\n\t\t\treturn {...state, users: action.payload}\r\n\r\n\t\tcase SET_TOTAL_COUNT:\r\n\t\t\treturn {...state, totalCount: action.payload}\r\n\r\n\t\tcase SET_CURRENT_PAGE:\r\n\t\t\treturn {...state, currentPage: action.payload}\r\n\r\n\t\tcase SET_IS_FETCHING:\r\n\t\t\treturn {...state, isFetching: action.payload}\r\n\r\n\t\tcase SET_FOLLOWING_IN_PROGRESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state, followingInProgress: action.payload.isFollowing\r\n\t\t\t\t\t? [...state.followingInProgress, action.payload.userId]\r\n\t\t\t\t\t: state.followingInProgress.filter(id => id !== action.payload.userId)\r\n\t\t\t}\r\n\r\n\t\tcase SET_TOGGLE_FOLLOW:\r\n\t\t\treturn {...state, users: state.users.map(u => {\r\n\t\t\t\t\tif(action.payload === u.id && !u.followed) {\r\n\t\t\t\t\t\treturn{...u, followed: true}\r\n\t\t\t\t\t} else if (action.payload === u.id && u.followed) {\r\n\t\t\t\t\t\treturn {...u, followed: false}\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn u\r\n\t\t\t\t})}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//action creators\r\nconst setUsers = (users) => ({type: SET_USERS_DATA, payload: users})\r\nconst setTotalCount = (totalCount) => ({type: SET_TOTAL_COUNT, payload: totalCount})\r\nconst setCurrentPage = (page) => ({type: SET_CURRENT_PAGE, payload: page})\r\nconst setToggleFollow = (userId) => ({type: SET_TOGGLE_FOLLOW, payload: userId})\r\nconst setIsFetching = (isFetching) => ({type: SET_IS_FETCHING, payload: isFetching})\r\nconst setFollowingInProgress = (isFollowing, userId) => ({type: SET_FOLLOWING_IN_PROGRESS, payload: {isFollowing, userId}})\r\n\r\n\r\n//thunk creators\r\n\r\n// receive users list\r\nexport const requestUsers = (page, pageSize) => async (dispatch) => {\r\n\tdispatch(setCurrentPage(page))\r\n\tdispatch(setIsFetching(true))\r\n\r\n\tconst data = await usersAPI.getUsers(page, pageSize)\r\n\r\n\tdispatch(setIsFetching(false))\r\n\tdispatch(setTotalCount(data.totalCount))\r\n\tdispatch(setUsers(data.items))\r\n}\r\n\r\n// subscribe\r\nexport const followAccept = (userId) => async (dispatch) => {\r\n\r\n\tdispatch(setFollowingInProgress(true, userId))\r\n\r\n\tconst data = await subscribeAPI.follow(userId)\r\n\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(setToggleFollow((userId)))\r\n\t\tdispatch(setFollowingInProgress(false, userId))\r\n\t}\r\n}\r\n\r\n// unsubscribe\r\nexport const unfollowAccept = (userId) => async (dispatch) => {\r\n\r\n\tdispatch(setFollowingInProgress(true, userId))\r\n\r\n\tconst data = await subscribeAPI.unfollow(userId)\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(setToggleFollow((userId)))\r\n\t\tdispatch(setFollowingInProgress(false, userId))\r\n\t}\r\n}\r\n\r\nexport default usersReducer;"],"sourceRoot":""}