{"version":3,"sources":["Redux/messages-reducer.js","api/api.js","Components/Aside/Aside.module.css","Redux/auth-reducer.js","Redux/app-reducer.js","Redux/redux-store.js","Components/LoginForm.jsx","Redux/selectors/auth-selectors.js","Components/Login.jsx","Components/Header/Header.jsx","Components/Header/HeaderContainer.jsx","Redux/selectors/side-bar-selectors.js","Components/Aside/AvatarsContainer/AvatarsContainer.jsx","Components/Aside/Aside.jsx","hoc/hocWithLazyLoad.js","Components/MainPage/MainPage.jsx","App.js","index.js","Redux/side-bar-reducer.js","Components/Login.module.css","Components/Header/Header.module.css","Components/Common/Preloader/Preloader.jsx","Components/Common/FormControls/FormControl.module.css","utils/validators.js","Components/Common/Preloader/Preloader.module.css","Components/Common/FormControls/FormControls.js","Redux/profile-reducer.js","Redux/users-reducer.js"],"names":["SEND_MY_MESSAGE_TEXT","SET_OPEN_DIALOG","initialState","usersWithDialogs","id","userImg","userName","dialogsMessages","message","openDialogWithUser","sendMessage","body","dispatch","type","payload","sendMyMessage","reset","openUsersListAction","isOpen","setOpenDialogWithUser","messagesReducer","state","action","replace","instance","axios","baseURL","withCredentials","headers","profileAPI","getProfile","userId","get","getStatus","then","response","data","updateUserStatus","status","put","updateBioProfile","profile","savePhoto","photoFile","formData","FormData","append","usersAPI","getUsers","currentPage","pageSize","authAPI","me","login","email","password","rememberMe","captcha","post","logout","delete","subscribeAPI","follow","unfollow","securityAPI","getCaptcha","module","exports","SET_USER_DATA","SET_CAPTCHA","SET_OWNER","isAuth","isOwner","captchaUrl","setUserData","setCaptchaUrl","setOwner","owner","getAuthUserData","a","resultCode","getCaptchaUrl","url","authReducer","INITIALIZED_SUCCESS","initialized","startInitialize","promiseMe","Promise","all","appReducer","reducers","combineReducers","sideBar","sideBarReducer","usersPage","usersReducer","auth","app","profilePage","profileReducer","messagesPage","form","formReducer","composeEnhancers","window","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","store","createStore","applyMiddleware","thunkMiddleware","Input","Element","LoginReduxForm","reduxForm","props","handleSubmit","error","onSubmit","className","style","login_form","commonError","Field","name","placeholder","component","validate","required","login_captcha","src","alt","getIsOwner","connect","loginAction","errorMessage","messages","stopSubmit","_error","to","login_wrapper","login_box","values","openMenu","closeMenu","header","logo","menuBtn_visible","onClick","actionLogout_box","Header","getAvatars","avatarsData","AvatarItem","avatarName","avatarImg","avatar_wrapper","img_wrapper","user_name","avatarItem","map","avatar","avatars_wrapper","avatars_box","menuVisible","useEffect","document","querySelector","overflow","aside","asideOpen","nav","activeClassName","active_link","setTimeout","closeMenu_wrapper","hocWithLazyLoad","Component","Suspense","fallback","Preloader","ProfileContainer","React","lazy","MessagesContainer","Music","Notifications","UsersContainer","Settings","MainPage","exact","path","render","ReactDOM","getElementById","SET_OPEN_MENU","SET_CLOSE_MENU","preloader_wrapper","fetching","value","maxLengthCreator","maxLength","length","input","meta","hasErrors","touched","form_control","SET_PROFILE","SET_POST","SET_STATUS","SET_UPDATE_BIO_SUCCESS","SET_UPLOADED_PHOTO","updatingBioSuccess","postData","likesCount","img","setUserStatus","setUpdateBioSuccess","successStatus","addPostMessage","setPostMessage","getUserProfile","getUserStatus","getState","userid","photo","photos","updateWasSuccessfully","refreshProfileInSettings","SET_USERS_DATA","SET_TOTAL_COUNT","SET_CURRENT_PAGE","SET_TOGGLE_FOLLOW","SET_IS_FETCHING","SET_FOLLOWING_IN_PROGRESS","users","totalCount","isFetching","followingInProgress","setCurrentPage","page","setToggleFollow","setIsFetching","setFollowingInProgress","isFollowing","requestUsers","items","subscribeUnsubscribeFlow","apiMethod","followAccept","bind","unfollowAccept","filter","u","followed"],"mappings":"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","file":"static/js/main.51262da8.chunk.js","sourcesContent":["import { reset } from \"redux-form\";\r\n\r\nconst SEND_MY_MESSAGE_TEXT = \"SEND_MY_MESSAGE_TEXT\"\r\nconst SET_OPEN_DIALOG = \"SET_OPEN_DIALOG\"\r\n\r\n\r\nconst initialState = {\r\n\tusersWithDialogs: [\r\n\t\t{\r\n\t\t\tid: 3450,\r\n\t\t\tuserImg: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT6b7WENFquctsWy8WgMSHmFJbVyJXf0lQ4R2XRAQcd2WgOK2IIfFlLUFcAcsdnpA8S_Wg&usqp=CAU',\r\n\t\t\tuserName: 'Sponge Bob'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 4560,\r\n\t\t\tuserImg: 'https://image1.thematicnews.com/uploads/images/00/00/41/2015/04/30/ad358ed4d0.jpg',\r\n\t\t\tuserName: 'Volk'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2340,\r\n\t\t\tuserImg: 'https://wonder-day.com/wp-content/uploads/2020/03/Wonder-Day-Ava-105.jpg',\r\n\t\t\tuserName: 'Dasha'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 3440,\r\n\t\t\tuserImg: 'https://www.meme-arsenal.com/memes/f0ffafb204862b25d0f1aa7fce251f3a.jpg',\r\n\t\t\tuserName: 'Niko'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 4000,\r\n\t\t\tuserImg: 'https://drasler.ru/wp-content/uploads/2019/05/%D0%94%D0%B5%D0%B2%D1%83%D1%88%D0%BA%D0%B0-%D0%B1%D1%80%D1%8E%D0%BD%D0%B5%D1%82%D0%BA%D0%B0-%D0%BD%D0%B0%D1%80%D0%B8%D1%81%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%B0%D1%8F-%D0%BA%D0%B0%D1%80%D1%82%D0%B8%D0%BD%D0%BA%D0%B8-%D0%B8-%D1%80%D0%B8%D1%81%D1%83%D0%BD%D0%BA%D0%B8023.jpg',\r\n\t\t\tuserName: 'Julia'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 5567,\r\n\t\t\tuserImg: 'https://i2.wp.com/andrey-eltsov.ru/wp-content/uploads/2017/09/DopNaAvu1.jpg',\r\n\t\t\tuserName: 'Vlad'\r\n\t\t}\r\n\t],\r\n\tdialogsMessages: [ { id: 0, message: 'hi' }, { id: 1, message: 'how are u?' }, { id: 2, message: 'you here?' } ],\r\n\topenDialogWithUser: false\r\n}\r\n\r\nconst messagesReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase SEND_MY_MESSAGE_TEXT:\r\n\t\t\tif (action.payload && action.payload.replace(/\\s/g, \"\")) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state, dialogsMessages: [ ...state.dialogsMessages, {\r\n\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\tmessage: action.payload\r\n\t\t\t\t\t} ]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn state\r\n\r\n\t\tcase SET_OPEN_DIALOG:\r\n\t\t\treturn { ...state, openDialogWithUser: action.payload }\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//action creators\r\nexport const sendMyMessage = (body) => ({ type: SEND_MY_MESSAGE_TEXT, payload: body })\r\nexport const setOpenDialogWithUser = (isOpen) => ({ type: SET_OPEN_DIALOG, payload: isOpen })\r\n\r\n\r\n// thunk creators\r\n\r\n// send message in dialogs\r\nexport const sendMessage = (body) => (dispatch) => {\r\n\tdispatch(sendMyMessage(body))\r\n\tdispatch(reset(\"addDialogMessageForm\"))\r\n}\r\n\r\nexport const openUsersListAction = (isOpen) => (dispatch) => {\r\n\tdispatch(setOpenDialogWithUser(isOpen))\r\n}\r\n\r\nexport default messagesReducer;","import * as axios from \"axios\";\r\n\r\nconst instance = axios.create({\r\n\tbaseURL: `https://social-network.samuraijs.com/api/1.0/`,\r\n\twithCredentials: true,\r\n\theaders: {\r\n\t\t'API-KEY': 'a1cfc85a-7e70-4120-8bed-62fbd526678c'\r\n\t\t// 'API-KEY': 'bb8e013c-9223-4dee-8a5a-b96156c04ec6'\r\n\t}\r\n})\r\n\r\nexport const profileAPI = {\r\n\tgetProfile(userId) {\r\n\t\treturn instance.get(`profile/${ userId }`)\r\n\t},\r\n\tgetStatus(userId) {\r\n\t\treturn instance.get(`profile/status/${ userId }`).then(response => response.data)\r\n\t},\r\n\tupdateUserStatus(status) {\r\n\t\treturn instance.put(`profile/status`, { status }).then(response => response.data)\r\n\t},\r\n\tupdateBioProfile(profile) {\r\n\t\treturn instance.put(`profile`, profile).then(response => response.data)\r\n\t},\r\n\tsavePhoto(photoFile) {\r\n\t\tconst formData = new FormData()\r\n\t\tformData.append(\"image\", photoFile)\r\n\t\treturn instance.put(`profile/photo`, formData, {\r\n\t\t\theaders: {\r\n\t\t\t\t'Content-Type': 'multipart/form-data'\r\n\t\t\t}\r\n\t\t}).then(response => response.data)\r\n\t}\r\n\r\n}\r\n\r\nexport const usersAPI = {\r\n\tgetUsers(currentPage, pageSize) {\r\n\t\treturn instance.get(`users?page=${ currentPage }&count=${ pageSize }`).then(response => response.data)\r\n\t}\r\n}\r\n\r\nexport const authAPI = {\r\n\tme() {\r\n\t\treturn instance.get(`auth/me`).then(response => response.data)\r\n\t},\r\n\tlogin(email, password, rememberMe = false, captcha = null) {\r\n\t\treturn instance.post(`auth/login`, { email, password, rememberMe, captcha }).then(response => response.data)\r\n\t},\r\n\tlogout() {\r\n\t\treturn instance.delete(`auth/login`).then(response => response.data)\r\n\t}\r\n}\r\n\r\nexport const subscribeAPI = {\r\n\tfollow(userId) {\r\n\t\treturn instance.post(`follow/${ userId }`).then(response => response.data)\r\n\t},\r\n\tunfollow(userId) {\r\n\t\treturn instance.delete(`follow/${ userId }`).then(response => response.data)\r\n\t}\r\n}\r\n\r\nexport const securityAPI = {\r\n\tgetCaptcha() {\r\n\t\treturn instance.get(`security/get-captcha-url`).then(response => response.data)\r\n\t}\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"aside\":\"Aside_aside__11b96\",\"asideOpen\":\"Aside_asideOpen__2HEwF\",\"nav\":\"Aside_nav__LAQWh\",\"active_link\":\"Aside_active_link__6zfJc\",\"avatars_wrapper\":\"Aside_avatars_wrapper__2968D\",\"avatars_box\":\"Aside_avatars_box__Nq9mM\",\"avatar_wrapper\":\"Aside_avatar_wrapper__vA0o8\",\"img_wrapper\":\"Aside_img_wrapper___ILMY\",\"user_name\":\"Aside_user_name__32glW\",\"closeMenu_wrapper\":\"Aside_closeMenu_wrapper__1-kwU\"};","import { authAPI, securityAPI } from \"../api/api\";\r\nimport { stopSubmit } from \"redux-form\";\r\n\r\nconst SET_USER_DATA = \"SET_USER_DATA\"\r\nconst SET_CAPTCHA = \"SET_CAPTCHA\"\r\nconst SET_OWNER = \"SET_OWNER\"\r\n\r\nlet initialState = {\r\n\tid: null,\r\n\temail: null,\r\n\tlogin: null,\r\n\tisAuth: false,\r\n\tisOwner: false,\r\n\tcaptchaUrl: null\r\n}\r\n\r\nconst authReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase SET_USER_DATA:\r\n\t\t\treturn { ...state, ...action.payload }\r\n\r\n\t\tcase SET_CAPTCHA:\r\n\t\t\treturn { ...state, captchaUrl: action.payload }\r\n\r\n\t\tcase SET_OWNER:\r\n\t\t\treturn { ...state, isOwner: action.payload }\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//action creators\r\nexport const setUserData = (id, email, login, isAuth) => ({ type: SET_USER_DATA, payload: { id, email, login, isAuth } })\r\nexport const setCaptchaUrl = (captchaUrl) => ({ type: SET_CAPTCHA, payload: captchaUrl })\r\nexport const setOwner = (owner) => ({ type: SET_OWNER, payload: owner })\r\n\r\n\r\n// thunk creators\r\n\r\n// receive authorized user data\r\nexport const getAuthUserData = () => async (dispatch) => {\r\n\tlet data = await authAPI.me()\r\n\tif (data.resultCode === 0) {\r\n\t\tlet { id, email, login } = data.data\r\n\t\tdispatch(setUserData(id, email, login, true))\r\n\t\tdispatch(setOwner(true))\r\n\t}\r\n}\r\n\r\n// login\r\nexport const loginAction = (email, password, rememberMe, captcha) => async (dispatch) => {\r\n\tconst data = await authAPI.login(email, password, rememberMe, captcha)\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(getAuthUserData())\r\n\t} else {\r\n\t\tif (data.resultCode === 10) {\r\n\t\t\tdispatch(getCaptchaUrl())\r\n\t\t}\r\n\t\tconst errorMessage = data.messages ? data.messages[0] : \"Some error\"\r\n\t\tdispatch(stopSubmit(\"login\", { _error: errorMessage }))\r\n\t}\r\n}\r\n\r\n// logout\r\nexport const logout = () => async (dispatch) => {\r\n\tconst data = await authAPI.logout()\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(setUserData(null, null, null, false))\r\n\t\tdispatch(setCaptchaUrl(null))\r\n\t\tdispatch(setOwner(false))\r\n\t}\r\n}\r\n\r\n// receive captcha\r\nexport const getCaptchaUrl = () => async (dispatch) => {\r\n\tconst data = await securityAPI.getCaptcha()\r\n\tdispatch(setCaptchaUrl(data.url))\r\n}\r\n\r\n\r\nexport default authReducer;","import { getAuthUserData } from \"./auth-reducer\";\r\n\r\nconst INITIALIZED_SUCCESS = \"INITIALIZED_SUCCESS\"\r\n\r\nconst initialState = {\r\n\tinitialized: false\r\n}\r\n\r\nconst appReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase INITIALIZED_SUCCESS:\r\n\t\t\treturn { ...state, initialized: true }\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//action creators\r\nexport const initializeSuccess = () => ({ type: INITIALIZED_SUCCESS })\r\n\r\n\r\n//thunk creators\r\n\r\n//initialization application\r\nexport const startInitialize = () => (dispatch) => {\r\n\tconst promiseMe = dispatch(getAuthUserData())\r\n\tPromise.all([ promiseMe ]).then(() => {\r\n\t\tdispatch(initializeSuccess())\r\n\t})\r\n}\r\n\r\nexport default appReducer;","import { applyMiddleware, combineReducers, compose, createStore } from \"redux\";\r\nimport thunkMiddleware from \"redux-thunk\";\r\nimport { reducer as formReducer } from \"redux-form\"\r\nimport sideBarReducer from \"./side-bar-reducer\";\r\nimport usersReducer from \"./users-reducer\";\r\nimport authReducer from \"./auth-reducer\";\r\nimport appReducer from \"./app-reducer\";\r\nimport profileReducer from \"./profile-reducer\";\r\nimport messagesReducer from \"./messages-reducer\";\r\n\r\nconst reducers = combineReducers({\r\n\tsideBar: sideBarReducer,\r\n\tusersPage: usersReducer,\r\n\tauth: authReducer,\r\n\tapp: appReducer,\r\n\tprofilePage: profileReducer,\r\n\tmessagesPage: messagesReducer,\r\n\tform: formReducer\r\n})\r\n\r\n// this is for the redux tool in the browser\r\nconst composeEnhancers = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\r\n\r\nconst store = createStore(reducers, composeEnhancers(applyMiddleware(thunkMiddleware)))\r\n\r\nwindow.store = store;\r\n\r\nexport default store;","import React from \"react\";\r\nimport style from \"./Login.module.css\";\r\nimport { Field, reduxForm } from \"redux-form\";\r\nimport { required } from \"../utils/validators\";\r\nimport { Element } from \"./Common/FormControls/FormControls\";\r\n\r\nconst Input = Element(\"input\")\r\n\r\nconst LoginForm = (props) => {\r\n\r\n\tconst { handleSubmit, captchaUrl, error } = props\r\n\r\n\treturn (\r\n\t\t<form onSubmit={ handleSubmit } className={ style.login_form } action=\"\">\r\n\t\t\t<h5>Login</h5>\r\n\t\t\t{ error && <span className={ style.commonError }>{ error }</span> }\r\n\t\t\t<span>\r\n\t\t\t\t<Field name=\"email\" placeholder=\"email\" component={ Input } validate={ [ required ] }/>\r\n\t\t\t</span>\r\n\t\t\t<span>\r\n\t\t\t\t<Field name=\"password\" type=\"password\" placeholder=\"password\" component={ Input } validate={ [ required ] }/>\r\n\t\t\t</span>\r\n\t\t\t<label>\r\n\t\t\t\t<Field name=\"rememberMe\" component={ Input } type=\"checkbox\"/>\r\n\t\t\t\t<span>Remember me</span>\r\n\t\t\t</label>\r\n\t\t\t{ captchaUrl && <span className={ style.login_captcha }>\r\n\t\t\t\t<Field name=\"captcha\" placeholder=\"captcha\" component={ Input }/>\r\n\t\t\t\t<img src={ captchaUrl } alt=\"captcha\"/>\r\n\t\t\t</span> }\r\n\t\t\t<div>\r\n\t\t\t\t<button>Login</button>\r\n\t\t\t</div>\r\n\t\t</form>\r\n\t);\r\n}\r\n\r\nconst LoginReduxForm = reduxForm({ form: \"login\" })(LoginForm)\r\n\r\nexport default LoginReduxForm;","export const getIsAuth = (state) => {\r\n\treturn state.auth.isAuth\r\n}\r\n\r\nexport const getCaptchaUrl = (state) => {\r\n\treturn state.auth.captchaUrl\r\n}\r\n\r\nexport const getIsOwner = (state) => {\r\n\treturn state.auth.isOwner\r\n}","import React, { useEffect } from 'react';\r\nimport style from './Login.module.css'\r\nimport { connect } from \"react-redux\";\r\nimport { loginAction } from \"../Redux/auth-reducer\";\r\nimport LoginReduxForm from \"./LoginForm\";\r\nimport { startInitialize } from \"../Redux/app-reducer\";\r\nimport { getCaptchaUrl, getIsAuth, getIsOwner } from \"../Redux/selectors/auth-selectors\";\r\nimport { Redirect } from \"react-router-dom\";\r\n\r\nconst Login = (props) => {\r\n\r\n\tconst { loginAction, captchaUrl, isOwner } = props\r\n\r\n\tconst onSubmit = (values) => {\r\n\t\tloginAction(values.email, values.password, values.rememberMe, values.captcha)\r\n\t}\r\n\r\n\tif (isOwner) return <Redirect to={ \"/\" }/>\r\n\r\n\treturn (\r\n\t\t<div className={ style.login_wrapper }>\r\n\t\t\t<div className={ style.login_box }>\r\n\t\t\t\t<LoginReduxForm onSubmit={ onSubmit } captchaUrl={ captchaUrl }/>\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tcaptchaUrl: getCaptchaUrl(state),\r\n\tisOwner: getIsOwner(state)\r\n})\r\n\r\nexport default connect(mapStateToProps, { loginAction, startInitialize })(Login);","import React from \"react\";\r\nimport style from \"./Header.module.css\";\r\nimport { connect } from \"react-redux\";\r\nimport { logout } from \"../../Redux/auth-reducer\";\r\nimport { closeMenu, openMenu } from \"../../Redux/side-bar-reducer\";\r\nimport { NavLink } from \"react-router-dom\";\r\n\r\nconst HeaderContainer = (props) => {\r\n\r\n\tconst { logout, openMenu } = props\r\n\r\n\tconst getLogout = () => {\r\n\t\tlogout();\r\n\t}\r\n\r\n\tconst actionOpenMenu = () => {\r\n\t\topenMenu()\r\n\t}\r\n\r\n\treturn (\r\n\t\t<header className={ `${ style.header }` }>\r\n\t\t\t<NavLink to=\"/profile\">\r\n\t\t\t\t<div className={ style.logo }>LOGO</div>\r\n\t\t\t</NavLink>\r\n\t\t\t<div className={ style.menuBtn_visible }>\r\n\t\t\t\t<button onClick={ actionOpenMenu }>Menu</button>\r\n\t\t\t</div>\r\n\t\t\t<div className={ style.actionLogout_box }>\r\n\t\t\t\t<button onClick={ getLogout }>Logout</button>\r\n\t\t\t</div>\r\n\t\t</header>\r\n\t);\r\n}\r\n\r\nexport default connect(null, { logout, openMenu, closeMenu })(HeaderContainer);","import React from \"react\";\r\nimport { connect } from \"react-redux\";\r\nimport Header from \"./Header\";\r\nimport { logout } from \"../../Redux/auth-reducer\";\r\n\r\nconst HeaderContainer = (props) => {\r\n\r\n\treturn <Header { ...props }/>\r\n}\r\n\r\nexport default connect(null, { logout })(HeaderContainer);","export const getAvatars = (state) => {\r\n\treturn state.sideBar.avatarsData\r\n}","import style from \"../Aside.module.css\";\r\nimport { connect } from \"react-redux\";\r\nimport React from \"react\";\r\nimport { getAvatars } from \"../../../Redux/selectors/side-bar-selectors\";\r\n\r\nconst AvatarItem = ({ avatarName, avatarImg }) => {\r\n\treturn (\r\n\t\t<div className={ style.avatar_wrapper }>\r\n\t\t\t<div className={ style.img_wrapper }>\r\n\t\t\t\t<img src={ avatarImg } alt=\"userAvatar\"/>\r\n\t\t\t</div>\r\n\t\t\t<span className={ style.user_name }>{ avatarName }</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst AvatarsContainer = ({ avatarsData }) => {\r\n\r\n\t// get an avatar object from the incoming array in props\r\n\tconst avatarItem = avatarsData.map(avatar => <AvatarItem key={ avatar.id } avatarName={ avatar.userName }\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t avatarImg={ avatar.userImg }/>)\r\n\r\n\treturn (\r\n\t\t<div className={ style.avatars_wrapper }>\r\n\t\t\t<h5>Users</h5>\r\n\t\t\t<div className={ style.avatars_box }>\r\n\t\t\t\t{ avatarItem }\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = state => ({ avatarsData: getAvatars(state) })\r\n\r\n// connected avatars container to store\r\nexport default connect(mapStateToProps, null)(AvatarsContainer);","import React, { useEffect } from \"react\";\r\nimport style from \"./Aside.module.css\";\r\nimport { NavLink } from \"react-router-dom\";\r\nimport ConnectedAvatarsContainer from \"./AvatarsContainer/AvatarsContainer\";\r\nimport { connect } from \"react-redux\";\r\nimport { closeMenu } from \"../../Redux/side-bar-reducer\";\r\n\r\nconst Aside = (props) => {\r\n\r\n\tconst { menuVisible, closeMenu } = props\r\n\r\n\tconst closeMenuAction = () => {\r\n\t\tsetTimeout(() => closeMenu(), 250)\r\n\t}\r\n\r\n\tuseEffect(() => {\r\n\t\tconst body = document.querySelector('body');\r\n\t\tbody.style.overflow = menuVisible ? 'hidden' : 'auto';\r\n\t}, [ menuVisible ])\r\n\r\n\treturn (\r\n\t\t<aside className={ `${ style.aside } ${ menuVisible ? style.asideOpen : \"\" }` }>\r\n\t\t\t<ul className={ style.nav }>\r\n\t\t\t\t<li><NavLink to=\"/profile\" activeClassName={ style.active_link }><span>Profile</span></NavLink></li>\r\n\t\t\t\t<li><NavLink to=\"/messages\" activeClassName={ style.active_link }><span>Messages</span></NavLink></li>\r\n\t\t\t\t<li><NavLink to=\"/music\" activeClassName={ style.active_link }><span>Music</span></NavLink></li>\r\n\t\t\t\t<li><NavLink to=\"/notifications\" activeClassName={ style.active_link }><span>Notifications</span></NavLink></li>\r\n\t\t\t\t<li><NavLink to=\"/users\" activeClassName={ style.active_link }><span>Users</span></NavLink></li>\r\n\t\t\t\t<li><NavLink to=\"/settings\" activeClassName={ style.active_link }><span>Settings</span></NavLink></li>\r\n\t\t\t</ul>\r\n\t\t\t<div>\r\n\t\t\t\t<ConnectedAvatarsContainer/>\r\n\t\t\t</div>\r\n\t\t\t<span onClick={ closeMenuAction } className={ style.closeMenu_wrapper }> </span>\r\n\t\t</aside>\r\n\t);\r\n}\r\n\r\nconst mapStateToProps = (state) => ({\r\n\tmenuVisible: state.sideBar.menuVisible\r\n})\r\n\r\nexport default connect(mapStateToProps, { closeMenu })(Aside);","import React from \"react\";\r\nimport Preloader from \"../Components/Common/Preloader/Preloader\";\r\n\r\nexport const hocWithLazyLoad = (Component) => {\r\n\treturn (props) => (\r\n\t\t<React.Suspense fallback={ <Preloader/> }>\r\n\t\t\t<Component { ...props } />\r\n\t\t</React.Suspense>\r\n\t);\r\n}","import React from \"react\";\r\nimport { Redirect, Route } from \"react-router-dom\";\r\n\r\nimport { hocWithLazyLoad } from \"../../hoc/hocWithLazyLoad\";\r\n\r\n// components with lazy load\r\nconst ProfileContainer = React.lazy(() => import(\"./Profile/ProfileContainer\"));\r\nconst MessagesContainer = React.lazy(() => import(\"./Messages/MessagesContainer\"));\r\nconst Music = React.lazy(() => import(\"./Music/MusicContainer\"));\r\nconst Notifications = React.lazy(() => import(\"./Notifications/NotificationsContainer\"));\r\nconst UsersContainer = React.lazy(() => import(\"./Users/UsersContainer\"));\r\nconst Settings = React.lazy(() => import(\"./Settings/SettingsContainer\"));\r\n\r\nconst MainPage = () => {\r\n\treturn (\r\n\t\t<div className=\"main_page\">\r\n\t\t\t<Route exact path='/'><Redirect to='/profile'/></Route>\r\n\t\t\t<Route path=\"/profile/:userId?\" render={ hocWithLazyLoad(ProfileContainer) }/>\r\n\t\t\t<Route path=\"/messages/\" render={ hocWithLazyLoad(MessagesContainer) }/>\r\n\t\t\t<Route path=\"/music\" render={ hocWithLazyLoad(Music) }/>\r\n\t\t\t<Route path=\"/notifications\" render={ hocWithLazyLoad(Notifications) }/>\r\n\t\t\t<Route path=\"/users\" render={ hocWithLazyLoad(UsersContainer) }/>\r\n\t\t\t<Route path=\"/settings\" render={ hocWithLazyLoad(Settings) }/>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default MainPage;","import React, { useEffect } from \"react\";\nimport './App.css';\nimport Login from \"./Components/Login\";\nimport HeaderContainer from \"./Components/Header/HeaderContainer\";\nimport Aside from \"./Components/Aside/Aside\";\nimport MainPage from \"./Components/MainPage/MainPage\";\nimport { connect } from \"react-redux\";\nimport { startInitialize } from \"./Redux/app-reducer\";\nimport Preloader from \"./Components/Common/Preloader/Preloader\";\n\nconst App = ({ initialized, startInitialize, isAuth }) => {\n\n\tuseEffect(() => {\n\t\tstartInitialize()\n\t}, [])\n\n\tif (!initialized) return <Preloader/>\n\n\tif (!isAuth) return <Login/>\n\n\treturn (\n\t\t<div className=\"App\">\n\t\t\t<HeaderContainer/>\n\t\t\t<main className=\"main_wrapper\">\n\t\t\t\t<Aside/>\n\t\t\t\t<MainPage/>\n\t\t\t</main>\n\t\t</div>\n\t);\n}\n\nconst mapStateToProps = (state) => ({\n\tinitialized: state.app.initialized,\n\tisAuth: state.auth.isAuth\n})\n\nexport default connect(mapStateToProps, { startInitialize })(App);\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport store from \"./Redux/redux-store\"\nimport \"./index.css\";\nimport App from \"./App\";\nimport { BrowserRouter, HashRouter } from \"react-router-dom\";\nimport { Provider } from \"react-redux\";\n\nReactDOM.render(\n\t<HashRouter>\n\t\t<Provider store={ store }>\n\t\t\t<App/>\n\t\t</Provider>\n\t</HashRouter>,\n\tdocument.getElementById('root')\n);\n","const SET_OPEN_MENU = \"SET_OPEN_MENU\"\r\nconst SET_CLOSE_MENU = \"SET_CLOSE_MENU\"\r\n\r\n\r\n// initial state for side-bar avatars (static)\r\nconst initialState = {\r\n\tavatarsData: [\r\n\t\t{\r\n\t\t\tid: 0,\r\n\t\t\tuserImg: 'https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT6b7WENFquctsWy8WgMSHmFJbVyJXf0lQ4R2XRAQcd2WgOK2IIfFlLUFcAcsdnpA8S_Wg&usqp=CAU',\r\n\t\t\tuserName: 'Sponge Bob'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tuserImg: 'https://image1.thematicnews.com/uploads/images/00/00/41/2015/04/30/ad358ed4d0.jpg',\r\n\t\t\tuserName: 'Volk'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tuserImg: 'https://wonder-day.com/wp-content/uploads/2020/03/Wonder-Day-Ava-105.jpg',\r\n\t\t\tuserName: 'Dasha'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 3,\r\n\t\t\tuserImg: 'https://www.meme-arsenal.com/memes/f0ffafb204862b25d0f1aa7fce251f3a.jpg',\r\n\t\t\tuserName: 'Niko'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 4,\r\n\t\t\tuserImg: 'https://drasler.ru/wp-content/uploads/2019/05/%D0%94%D0%B5%D0%B2%D1%83%D1%88%D0%BA%D0%B0-%D0%B1%D1%80%D1%8E%D0%BD%D0%B5%D1%82%D0%BA%D0%B0-%D0%BD%D0%B0%D1%80%D0%B8%D1%81%D0%BE%D0%B2%D0%B0%D0%BD%D0%BD%D0%B0%D1%8F-%D0%BA%D0%B0%D1%80%D1%82%D0%B8%D0%BD%D0%BA%D0%B8-%D0%B8-%D1%80%D0%B8%D1%81%D1%83%D0%BD%D0%BA%D0%B8023.jpg',\r\n\t\t\tuserName: 'Julia'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 5,\r\n\t\t\tuserImg: 'https://i2.wp.com/andrey-eltsov.ru/wp-content/uploads/2017/09/DopNaAvu1.jpg',\r\n\t\t\tuserName: 'Vlad'\r\n\t\t}\r\n\t],\r\n\tmenuVisible: false\r\n}\r\n\r\nconst sideBarReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase SET_OPEN_MENU:\r\n\t\t\treturn { ...state, menuVisible: action.payload }\r\n\r\n\t\tcase SET_CLOSE_MENU:\r\n\t\t\treturn { ...state, menuVisible: action.payload }\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\nexport const setOpenMenu = () => ({ type: SET_OPEN_MENU, payload: true })\r\nexport const setCloseMenu = () => ({ type: SET_CLOSE_MENU, payload: false })\r\n\r\n\r\nexport const openMenu = () => (dispatch) => {\r\n\tdispatch(setOpenMenu())\r\n}\r\nexport const closeMenu = () => (dispatch) => {\r\n\tdispatch(setCloseMenu())\r\n}\r\n\r\nexport default sideBarReducer;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"login_wrapper\":\"Login_login_wrapper__33QG2\",\"login_box\":\"Login_login_box__mubJU\",\"login_form\":\"Login_login_form__2y_Z_\",\"login_captcha\":\"Login_login_captcha__2A5do\",\"commonError\":\"Login_commonError__1XlwA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"header\":\"Header_header__1Sdb4\",\"actionLogout_box\":\"Header_actionLogout_box__w54Gz\",\"menuBtn_visible\":\"Header_menuBtn_visible__2aNtE\",\"logo\":\"Header_logo__3IA6t\"};","import React from \"react\";\r\nimport style from \"./Preloader.module.css\";\r\n\r\nconst Preloader = () => {\r\n\treturn (\r\n\t\t<div className={ style.preloader_wrapper }>\r\n\t\t\t<div className={ style.fetching }>\r\n\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t);\r\n}\r\n\r\nexport default Preloader;","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form_control\":\"FormControl_form_control__3j1S1\",\"error\":\"FormControl_error__3Jt8C\",\"errorMessage\":\"FormControl_errorMessage__3jpv-\",\"commonError\":\"FormControl_commonError__1hDeW\"};","export const required = value => {\r\n\tif (value) return undefined;\r\n\treturn \"field is required\";\r\n}\r\n\r\nexport const maxLengthCreator = maxLength => value => {\r\n\tif (value && value.length > maxLength) return `Max length is ${maxLength} symbols`;\r\n\treturn undefined;\r\n}","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preloader_wrapper\":\"Preloader_preloader_wrapper__2-yzO\",\"fetching\":\"Preloader_fetching__2T72x\",\"search-fetching\":\"Preloader_search-fetching__2v8MP\"};","import React from \"react\";\r\nimport style from \"./FormControl.module.css\";\r\n\r\n\r\nexport const Element = Element => ({ input, meta, ...props }) => {\r\n\tconst hasErrors = meta.touched && meta.error\r\n\treturn (\r\n\t\t<div className={ `${ style.form_control } ${ hasErrors && style.error }` }>\r\n\t\t\t{ hasErrors && <span className={ style.errorMessage }>{ meta.error }</span> }\r\n\t\t\t<Element { ...input } { ...props } />\r\n\t\t</div>\r\n\t)\r\n};","import { profileAPI } from \"../api/api\";\r\nimport { reset } from \"redux-form\";\r\n\r\nconst SET_PROFILE = \"SET_PROFILE\"\r\nconst SET_POST = \"SET_POST\"\r\nconst SET_STATUS = \"SET_STATUS\"\r\nconst SET_UPDATE_BIO_SUCCESS = \"SET_UPDATE_BIO_SUCCESS\"\r\nconst SET_UPLOADED_PHOTO = \"SET_UPLOADED_PHOTO\"\r\n\r\nconst initialState = {\r\n\tprofile: null,\r\n\tstatus: null,\r\n\tupdatingBioSuccess: \"\",\r\n\tpostData: [\r\n\t\t{\r\n\t\t\tid: 0,\r\n\t\t\tname: 'Vlad',\r\n\t\t\tmessage: 'hi',\r\n\t\t\tlikesCount: '150',\r\n\t\t\timg: 'https://i2.wp.com/andrey-eltsov.ru/wp-content/uploads/2017/09/DopNaAvu1.jpg'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 1,\r\n\t\t\tname: 'Volk',\r\n\t\t\tmessage: 'hi, are u there??',\r\n\t\t\tlikesCount: '35',\r\n\t\t\timg: 'https://image1.thematicnews.com/uploads/images/00/00/41/2015/04/30/ad358ed4d0.jpg'\r\n\t\t},\r\n\t\t{\r\n\t\t\tid: 2,\r\n\t\t\tname: 'Dasha',\r\n\t\t\tmessage: 'hi, how are u?',\r\n\t\t\tlikesCount: '1536',\r\n\t\t\timg: 'https://wonder-day.com/wp-content/uploads/2020/03/Wonder-Day-Ava-105.jpg'\r\n\t\t},\r\n\t]\r\n}\r\n\r\nconst profileReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\r\n\t\tcase SET_PROFILE:\r\n\t\t\treturn { ...state, profile: action.payload }\r\n\r\n\t\tcase SET_STATUS:\r\n\t\t\treturn { ...state, status: action.payload }\r\n\r\n\t\tcase SET_UPDATE_BIO_SUCCESS:\r\n\t\t\treturn { ...state, updatingBioSuccess: action.payload }\r\n\r\n\t\tcase SET_UPLOADED_PHOTO:\r\n\t\t\treturn { ...state, profile: { ...state.profile, photos: action.payload } }\r\n\r\n\t\tcase SET_POST:\r\n\t\t\tif (action.payload && action.payload.replace(/\\s/g, \"\")) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...state, postData: [ ...state.postData, {\r\n\t\t\t\t\t\tid: 3,\r\n\t\t\t\t\t\tname: \"Dasha\",\r\n\t\t\t\t\t\tmessage: action.payload,\r\n\t\t\t\t\t\tlikesCount: 0,\r\n\t\t\t\t\t\timg: \"https://wonder-day.com/wp-content/uploads/2020/03/Wonder-Day-Ava-105.jpg\"\r\n\t\t\t\t\t} ]\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn state\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n// action creators\r\nexport const setUserProfile = (profile) => ({ type: SET_PROFILE, payload: profile })\r\nexport const setPostMessage = (message) => ({ type: SET_POST, payload: message })\r\nexport const setUserStatus = (status) => ({ type: SET_STATUS, payload: status })\r\nexport const setUpdateBioSuccess = (successStatus) => ({ type: SET_UPDATE_BIO_SUCCESS, payload: successStatus })\r\nexport const setUploadedPhoto = (photos) => ({ type: SET_UPLOADED_PHOTO, payload: photos })\r\n\r\n\r\n// thunk creators\r\n\r\n// adding post on profile page\r\nexport const addPostMessage = (message) => (dispatch) => {\r\n\tdispatch(setPostMessage(message))\r\n\tdispatch(reset(\"postMessageForm\"))\r\n}\r\n\r\n// receive user profile data\r\nexport const getUserProfile = (userId) => async (dispatch) => {\r\n\tconst data = await profileAPI.getProfile(userId)\r\n\tdispatch(setUserProfile(data.data))\r\n}\r\n\r\nexport const getUserStatus = (userId) => async (dispatch) => {\r\n\tconst data = await profileAPI.getStatus(userId)\r\n\tdispatch(setUserStatus(data))\r\n}\r\n\r\nexport const updateUserStatus = (status) => async (dispatch) => {\r\n\tconst data = await profileAPI.updateUserStatus(status)\r\n\tif (data.resultCode === 0) dispatch(setUserStatus(status))\r\n}\r\n\r\nexport const updateBioProfile = (profile) => async (dispatch, getState) => {\r\n\tconst userid = getState().auth.id\r\n\tlet data = await profileAPI.updateBioProfile(profile)\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(getUserProfile(userid))\r\n\t\tdispatch(setUpdateBioSuccess(\"updating was successfully!\"))\r\n\t}\r\n}\r\n\r\nexport const savePhoto = (photo) => async (dispatch) => {\r\n\tconst data = await profileAPI.savePhoto(photo)\r\n\tdispatch(setUploadedPhoto(data.data.photos))\r\n\tdispatch(setUpdateBioSuccess(\"updating was successfully!\"))\r\n}\r\n\r\nexport const updateWasSuccessfully = (successStatus) => (dispatch) => {\r\n\tdispatch(setUpdateBioSuccess(successStatus))\r\n}\r\n\r\nexport const refreshProfileInSettings = () => (dispatch, getState) => {\r\n\tconst userid = getState().auth.id\r\n\tdispatch(getUserProfile(userid))\r\n}\r\n\r\n\r\nexport default profileReducer;","import { subscribeAPI, usersAPI } from \"../api/api\";\r\n\r\nconst SET_USERS_DATA = \"SET_USERS_DATA\";\r\nconst SET_TOTAL_COUNT = \"SET_TOTAL_COUNT\";\r\nconst SET_CURRENT_PAGE = \"SET_CURRENT_PAGE\";\r\nconst SET_TOGGLE_FOLLOW = \"SET_TOGGLE_FOLLOW\";\r\nconst SET_IS_FETCHING = \"SET_IS_FETCHING\";\r\nconst SET_FOLLOWING_IN_PROGRESS = \"SET_FOLLOWING_IN_PROGRESS\";\r\n\r\n\r\n// initial state for side-bar avatars (static)\r\nconst initialState = {\r\n\tusers: [],\r\n\tpageSize: 75,\r\n\tcurrentPage: 1,\r\n\ttotalCount: 0,\r\n\tisFetching: false,\r\n\tfollowingInProgress: []\r\n}\r\n\r\nconst usersReducer = (state = initialState, action) => {\r\n\tswitch (action.type) {\r\n\t\tcase SET_USERS_DATA:\r\n\t\t\treturn { ...state, users: action.payload }\r\n\r\n\t\tcase SET_TOTAL_COUNT:\r\n\t\t\treturn { ...state, totalCount: action.payload }\r\n\r\n\t\tcase SET_CURRENT_PAGE:\r\n\t\t\treturn { ...state, currentPage: action.payload }\r\n\r\n\t\tcase SET_IS_FETCHING:\r\n\t\t\treturn { ...state, isFetching: action.payload }\r\n\r\n\t\tcase SET_FOLLOWING_IN_PROGRESS:\r\n\t\t\treturn {\r\n\t\t\t\t...state, followingInProgress: action.payload.isFollowing\r\n\t\t\t\t\t? [ ...state.followingInProgress, action.payload.userId ]\r\n\t\t\t\t\t: state.followingInProgress.filter(id => id !== action.payload.userId)\r\n\t\t\t}\r\n\r\n\t\tcase SET_TOGGLE_FOLLOW:\r\n\t\t\treturn {\r\n\t\t\t\t...state, users: state.users.map(u => {\r\n\t\t\t\t\tif (action.payload === u.id && !u.followed) {\r\n\t\t\t\t\t\treturn { ...u, followed: true }\r\n\t\t\t\t\t} else if (action.payload === u.id && u.followed) {\r\n\t\t\t\t\t\treturn { ...u, followed: false }\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn u\r\n\t\t\t\t})\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state\r\n\t}\r\n}\r\n\r\n//action creators\r\nconst setUsers = (users) => ({ type: SET_USERS_DATA, payload: users })\r\nconst setTotalCount = (totalCount) => ({ type: SET_TOTAL_COUNT, payload: totalCount })\r\nconst setCurrentPage = (page) => ({ type: SET_CURRENT_PAGE, payload: page })\r\nconst setToggleFollow = (userId) => ({ type: SET_TOGGLE_FOLLOW, payload: userId })\r\nconst setIsFetching = (isFetching) => ({ type: SET_IS_FETCHING, payload: isFetching })\r\nconst setFollowingInProgress = (isFollowing, userId) => ({ type: SET_FOLLOWING_IN_PROGRESS, payload: { isFollowing, userId } })\r\n\r\n\r\n//thunk creators\r\n\r\n// receive users list\r\nexport const requestUsers = (page, pageSize) => async (dispatch) => {\r\n\tdispatch(setCurrentPage(page))\r\n\tdispatch(setIsFetching(true))\r\n\r\n\tconst data = await usersAPI.getUsers(page, pageSize)\r\n\r\n\tdispatch(setIsFetching(false))\r\n\tdispatch(setTotalCount(data.totalCount))\r\n\tdispatch(setUsers(data.items))\r\n}\r\n\r\n// subscribe unsubscribe unfollow flow\r\nexport const subscribeUnsubscribeFlow = async (dispatch, userId, apiMethod) => {\r\n\tdispatch(setFollowingInProgress(true, userId))\r\n\tconst data = await apiMethod(userId)\r\n\r\n\tif (data.resultCode === 0) {\r\n\t\tdispatch(setToggleFollow((userId)))\r\n\t\tdispatch(setFollowingInProgress(false, userId))\r\n\t}\r\n}\r\n\r\n// subscribe\r\nexport const followAccept = (userId) => async (dispatch) => {\r\n\tawait subscribeUnsubscribeFlow(dispatch, userId, subscribeAPI.follow.bind(subscribeAPI))\r\n\r\n\r\n}\r\n\r\n// unsubscribe\r\nexport const unfollowAccept = (userId) => async (dispatch) => {\r\n\tawait subscribeUnsubscribeFlow(dispatch, userId, subscribeAPI.unfollow.bind(subscribeAPI))\r\n}\r\n\r\nexport default usersReducer;"],"sourceRoot":""}